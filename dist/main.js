!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.keysPressed={},this.keydown=this.keydown.bind(this),this.keyup=this.keyup.bind(this),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}var e,i,n;return e=t,(i=[{key:"keydown",value:function(e){switch(e.preventDefault(),this.player.idle=!1,this.player.keydown=!0,t.KEYS[e.keyCode]){case"left":this.keysPressed.left=!0,this.player.direction="left",this.player.velX=-6;break;case"right":this.keysPressed.right=!0,this.player.direction="right",this.player.velX=7;break;case"up":this.keysPressed.up=!0,this.player.canClimb&&(console.log("sdlfska;sdlf"),console.log(this.player.canClimb),console.log(this.player.idle),this.player.climbing=!0,this.player.velY=-7);break;case"down":this.keysPressed.down=!0,this.player.canClimb&&(console.log(this.player.canClimb),this.player.climbing=!0,this.player.velY=7);break;case"jump":this.keysPressed.jump=!0,this.player.jump();break;case"fire":this.keysPressed.fire=!0,this.keysPressed.up?this.player.shootFire("up"):this.keysPressed.down&&!this.player.onGround?this.player.shootFire("down"):this.player.shootFire();break;case"space":break;default:return}}},{key:"keyup",value:function(e){switch(e.preventDefault(),t.KEYS[e.keyCode]){case"left":this.keysPressed.left=!1,this.keysPressed.left||this.keysPressed.right||(this.player.velX=0);break;case"right":this.keysPressed.right=!1,this.keysPressed.left||this.keysPressed.right||(this.player.velX=0);break;case"up":this.keysPressed.up=!1,this.player.climbing&&(this.player.climbing=!1);break;case"down":this.keysPressed.down=!1;break;case"jump":this.keysPressed.jump=!1;break;case"fire":this.keysPressed.fire=!1;break;case"space":break;default:return}this.player.idle=!0}}])&&s(e.prototype,i),n&&s(e,n),t}();n.KEYS={19:"space",37:"left",38:"up",39:"right",40:"down",65:"jump",68:"fire",13:"enter"};var h=n;function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.pos=e.pos,this.ctx=e.ctx,this.canvas=e.canvas,this.width=e.width,this.height=e.height,this.x=e.pos[0],this.y=e.pos[1],this.oldX=this.x,this.oldY=this.y,this.tileSize=60,this.rightSide=this.rightSide.bind(this),this.leftSide=this.leftSide.bind(this),this.topSide=this.topSide.bind(this),this.bottomSide=this.bottomSide.bind(this),this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this)}var e,i,s;return e=t,(i=[{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}}])&&r(e.prototype,i),s&&r(e,s),t}();function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.music=document.createElement("audio"),this.music.src=e.src,this.music.id="theme",this.music.setAttribute("preload","auto"),this.music.setAttribute("controls","none"),this.music.setAttribute("loop","true"),this.music.setAttribute("muted","false"),this.music.style.display="none",this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.mute=this.mute.bind(this)}var e,i,s;return e=t,(i=[{key:"play",value:function(){this.music.play()}},{key:"pause",value:function(){this.music.pause()}},{key:"mute",value:function(){this.music.muted=!this.music.muted}}])&&l(e.prototype,i),s&&l(e,s),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=f(this,d(e).call(this,{name:t.name,pos:t.pos,ctx:t.ctx,width:t.width,height:t.height}))).vel=[0,0],i.health=200,i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),i=e,(s=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/charSprite.png",t}}])&&u(i.prototype,s),n&&u(i,n),e}(o);function p(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=1,v=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.canvas=i,this.character=new y({name:"Seisa",pos:[20,210],ctx:this.ctx,canvas:this.canvas,width:30,height:45}),this.health=this.character.health,this.spriteMap=this.character.loadImage(),this.fireballs={},this.vel=this.character.vel,this.x=this.character.x,this.y=this.character.y,this.idleWidth=30,this.runWidth=31.5,this.oldX=this.x,this.oldY=this.y,this.width=this.character.width,this.height=this.character.height,this.velX=this.vel[0],this.velY=this.vel[1],this.onGround=!1,this.idle=!0,this.keydown=!1,this.isRunning=!1,this.direction="right",this.jumpCount=2,this.canClimb=!1,this.climbing=!1,this.frameCount=0,this.isHit=!1,this.dying=!1,this.dead=!1,this.drawPlayer=this.drawPlayer.bind(this),this.jump=this.jump.bind(this),this.shootFire=this.shootFire.bind(this),this.setOldPos=this.setOldPos.bind(this),this.inAir=this.inAir.bind(this),this.isIdle=this.isIdle.bind(this),this.whichDirection=this.whichDirection.bind(this),this.setRunning=this.setRunning.bind(this),this.setHit=this.setHit.bind(this),this.setDying=this.setDying.bind(this),this.isClimbing=this.isClimbing.bind(this),this.getDirX=this.getDirX.bind(this),this.getDirY=this.getDirY.bind(this)}var e,i,s;return e=t,(i=[{key:"drawPlayer",value:function(t){this.setDying(),this.isHit&&t%3==0||(0===this.velX?"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%10*147,251,147,251,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%10*147,251,147,251,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)):this.velX>0?this.ctx.drawImage(this.spriteMap,t%10*186,0,186,251,this.x,this.y,this.width,this.height):this.velX<0&&(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,t%10*186,0,186,251,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)))}},{key:"shootFire",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(3!==Object.keys(this.fireballs).length){for(var e,i=1;i<=3;i++)if(!this.fireballs[i]){e=i;break}"up"===t?this.fireballs[e]=new O(O.fireballVert([this.rightSide()-this.width/2,this.bottomSide()+this.height],0,-20,t)):"down"===t?(this.fireballs[e]=new O(O.fireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,20,t)),this.velY-=10,this.jumpCount-=1):"right"===this.direction?this.fireballs[e]=new O(O.fireball([this.rightSide()-this.width/1.5,this.bottomSide()-this.height/1.8],20,0,"right")):"left"===this.direction&&(this.fireballs[e]=new O(O.fireball([this.leftSide()-this.width/2,this.bottomSide()-this.height/1.8],-20,0,"left")))}}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),2e3),this.health-=e)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"setOldPos",value:function(){this.oldX=this.x,this.oldY=this.y}},{key:"getDirX",value:function(){return this.x+this.velX}},{key:"getDirY",value:function(){return this.y+this.velY}},{key:"isIdle",value:function(){0===this.velX&&0===this.velY?this.idle=!0:this.idle=!1}},{key:"inAir",value:function(){this.onGround?this.velY=0:(this.y+=this.velY,this.velY+g>25?this.velY=25:this.velY+=g)}},{key:"isClimbing",value:function(){this.climbing&&this.canClimb&&this.keydown?this.y+=this.velY:this.velY=0}},{key:"jump",value:function(){2===this.jumpCount?(this.onGround=!1,this.velY=-15,this.jumpCount=1):1===this.jumpCount&&(this.velY=-15,this.jumpCount=0)}},{key:"climb",value:function(){this.climb=!this.climb}},{key:"setRunning",value:function(){0!==this.velX?(this.isRunning=!0,this.width=this.runWidth):(this.isRunning=!1,this.width=this.idleWidth)}},{key:"whichDirection",value:function(){this.direction=this.velX>=0?"right":"left"}}])&&p(e.prototype,i),s&&p(e,s),t}();function b(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var w=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collidePlayer=this.collidePlayer.bind(this),this.collidePlatform=this.collidePlatform.bind(this),this.collidePlatTop=this.collidePlatTop.bind(this),this.collidePlatBottom=this.collidePlatBottom.bind(this),this.collidePlatLeft=this.collidePlatLeft.bind(this),this.collidePlatRight=this.collidePlatRight.bind(this),this.collideSlopeFortyFiveRight=this.collideSlopeFortyFiveRight.bind(this),this.collideSlopeFortyFiveRightBottom=this.collideSlopeFortyFiveRightBottom.bind(this),this.collideSlopeFortyFiveLeft=this.collideSlopeFortyFiveLeft.bind(this),this.collideSlopeFortyFiveLeftBottom=this.collideSlopeFortyFiveLeftBottom.bind(this),this.collideSlopeTwentyLeft=this.collideSlopeTwentyLeft.bind(this),this.collideSlopeTwentyLeftBottom=this.collideSlopeTwentyLeftBottom.bind(this),this.collideSlopeTwentyRight=this.collideSlopeTwentyRight.bind(this),this.collideSlopeTwentyRightBottom=this.collideSlopeTwentyRightBottom.bind(this),this.climbable=this.climbable.bind(this),this.collideEnemy=this.collideEnemy.bind(this),this.collisionPlatformKeys={1:function(t,i,s,n,h){e.collidePlatTop(t,s)},2:function(t,i,s,n,h){t.velY>0&&e.collidePlatTop(t,s)},3:function(t,i,s,n,h){e.collidePlatBottom(t,s+h)},4:function(t,i,s,n,h){e.collidePlatLeft(t,i)},5:function(t,i,s,n,h){e.collidePlatRight(t,i+h)},6:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatLeft(t,i)},7:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatRight(t,i+h)},8:function(t,i,s,n,h){e.collidePlatBottom(t,s+h)||e.collidePlatLeft(t,i)},9:function(t,i,s,n,h){e.collidePlatBottom(t,s+h)||e.collidePlatRight(t,i)},10:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+h)},11:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+h)||e.collidePlatLeft(t,i)},12:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatRight(t,i+h)||e.collidePlatLeft(t,i)},13:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+h)||e.collidePlatRight(t,i+h)},14:function(t,i,s,n,h){e.collidePlatBottom(t,s+h)||e.collidePlatRight(t,i+h)||e.collidePlatLeft(t,i)},15:function(t,i,s,n,h){e.collidePlatTop(t,s+h/2)},16:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/2)},17:function(t,i,s,n,h){e.collidePlatLeft(t,i+h/2)},18:function(t,i,s,n,h){e.collidePlatRight(t,i+h/2)},19:function(t,i,s,n,h){e.collidePlatTop(t,s+h/2)||e.collidePlatLeft(t,i)},20:function(t,i,s,n,h){e.collidePlatTop(t,s+h/2)||e.collidePlatRight(t,i+h)},21:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/2)||e.collidePlatLeft(t,i)},22:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/2)||e.collidePlatRight(t,i+h)},23:function(t,i,s,n,h){e.collidePlatLeft(t,i+h/2)||t.x+t.width>i+h/2&&e.collidePlatTop(t,s)},24:function(t,i,s,n,h){e.collidePlatRight(t,i+h/2)||t.x<i+h/2&&e.collidePlatTop(t,s)},25:function(t,i,s,n,h){e.collidePlatLeft(t,i+h/2)||t.x+t.width>i+h/2&&e.collidePlatBottom(t,s+h)},26:function(t,i,s,n,h){e.collidePlatRight(t,i+h/2)||t.x<i+h/2&&e.collidePlatBottom(t,s+h)},27:function(t,i,s,n,h){e.collidePlatLeft(t,i+h/2)||e.collidePlatBottom(t,s+h)||e.collidePlatTop(t,s)},28:function(t,i,s,n,h){e.collidePlatRight(t,i+h/2)||e.collidePlatBottom(t,s+h)||e.collidePlatTop(t,s)},29:function(t,i,s,n,h){e.collidePlatTop(t,s+h/2)||e.collidePlatLeft(t,i+h/2)},30:function(t,i,s,n,h){e.collidePlatTop(t,s+h/2)||e.collidePlatRight(t,i+h/2)},31:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/2)||e.collidePlatLeft(t,i+h/2)},32:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/2)||e.collidePlatRight(t,i+h/2)},33:function(t,i,s,n,h){t.velY>0&&e.collidePlatTop(t,s+h)},34:function(t,i,s,n,h){e.collidePlatBottom(t,s+h)||e.collideSlopeFortyFiveLeft(t,i+h,s+h)},35:function(t,i,s,n,h){e.collideSlopeFortyFiveRight(t,i,s+h)},36:function(t,i,s,n,h){e.collideSlopeTwentyLeft(t,i+h,s+h)},37:function(t,i,s,n,h){e.collideSlopeTwentyRight(t,i,s+h)},38:function(t,i,s,n,h){e.collideSlopeTwentyLeft(t,i,s+h,h/2)},39:function(t,i,s,n,h){e.collideSlopeTwentyRight(t,i,s+h,h/2)},40:function(t,i,s,n,h){e.collideSlopeFortyFiveRightBottom(t,i,s+h)},41:function(t,i,s,n,h){e.collideSlopeFortyFiveLeftBottom(t,i+h,s+h)},42:function(t,i,s,n,h){e.collideSlopeTwentyLeftBottom(t,i+h,s+h)},43:function(t,i,s,n,h){e.collideSlopeTwentyRightBottom(t,i,s+h)},44:function(t,i,s,n,h){e.collideSlopeTwentyLeftBottom(t,i+h,s+h,h/2)},45:function(t,i,s,n,h){e.collideSlopeTwentyRightBottom(t,i,s+h,h/2)},46:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collideSlopeFortyFiveLeftBottom(t,i,s+h)},47:function(t,i,s,n,h){e.collidePlatTop(t,s)||e.collideSlopeFortyFiveRightBottom(t,i,s+h)},48:function(t,i,s,n,h){e.collidePlatLeft(t,i)||e.collideSlopeFortyFiveLeft(t,i,s+h)},49:function(t,i,s,n,h){e.collidePlatRight(t,i+h)||e.collideSlopeTwentyRight(t,i,s+h,h/2)},50:function(t,i,s,n,h){e.collidePlatLeft(t,i)||e.collideSlopeTwentyLeft(t,i,s+h,h/2)},51:function(t,i,s,n,h){e.collidePlatRight(t,i+h)||e.collideSlopeTwentyRight(t,i,s+h,h/2)},58:function(t,i,s,n,h){t.x+t.width>i+h/4&&t.x<i+.75*h&&e.climbable(t,i,s,h)},63:function(t,i,s,n,h){e.collidePlatLeft(t,i)?t instanceof v&&t.setHit(5):e.collidePlatBottom(t,s+h/6)?t instanceof v&&t.setHit(5):(e.collidePlatRight(t,i+h),t instanceof v&&t.setHit(5))},67:function(t,i,s,n,h){e.collidePlatBottom(t,s+h/6),t instanceof v&&t.setHit(5)}}}var e,i,s;return e=t,(i=[{key:"collidePlayer",value:function(t,e,i){t.x<0?(t.x=.01,t.velX=0):t.x+t.width>e.width&&!i&&(t.x=e.width-t.width,t.velX=0),t.y>e.height&&(t.y=0,t.setHit(50))}},{key:"climbable",value:function(t,e,i){t.canClimb=!0}},{key:"collideProjectile",value:function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(e.damage),e.setHit(),!0)}},{key:"collideEnemy",value:function(t,e){return!e.dying&&!e.dead&&t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&(t instanceof v&&!t.isHit?(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(e.damage),!0):t instanceof O?(e.setHit(t.damage),setTimeout((function(){t.setHit()}),10),!0):void 0)}},{key:"collideSlopeFortyFiveRight",value:function(t,e,i){var s=i-(t.rightSide()-e);if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.y=i-t.height-.05,t.onGround=!0,void(t.jumpCount=2);t.y=s-t.height-.05}else t.onGround||t.rightSide()>e&&t.bottomSide()>s&&t.oldY+t.height<s&&(t.onGround=!0,t.jumpCount=2,t.y=s-t.height-.05)}},{key:"collideSlopeFortyFiveRightBottom",value:function(t,e,i){var s=i-(t.rightSide()-e);t.rightSide()>e&&t.topSide()<s&&t.oldY>s&&(t.y=s+.05)}},{key:"collideSlopeFortyFiveLeft",value:function(t,e,i){var s=i-(e-t.leftSide());if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.y=i-t.height-.05,t.onGround=!0,void(t.jumpCount=2);t.y=s-t.height-.05}else t.onGround||t.leftSide()<e&&t.bottomSide()>s&&t.oldY+t.height<s&&(t.onGround=!0,t.jumpCount=2,t.y=s-t.height-.05)}},{key:"collideSlopeFortyFiveLeftBottom",value:function(t,e,i){var s=i-(e-t.leftSide());t.leftSide()<e&&t.topSide()<s&&t.oldY>s&&(t.y=s+.05)}},{key:"collideSlopeTwentyRight",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=i-(s+(t.rightSide()-e)/2);t instanceof v&&t.rightSide()>e&&t.bottomSide()>n&&t.oldY+t.height<n&&(t.onGround=!0,t.jumpCount=2,t.y=n-t.height-.05)}},{key:"collideSlopeTwentyRightBottom",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=i-(s+(t.rightSide()-e)/2);t.rightSide()>e&&t.topSide()<n&&t.oldY>n&&(t.y=n+.05)}},{key:"collideSlopeTwentyLeft",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=i-(s+(e-t.leftSide())/2);if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.y=i-t.height-.05,t.onGround=!0,void(t.jumpCount=2);t.y=n-t.height-.05}else t.onGround||t.leftSide()<e&&t.bottomSide()>n&&t.oldY+t.height<n&&(t.onGround=!0,t.jumpCount=2,t.y=n-t.height-.05)}},{key:"collideSlopeTwentyLeftBottom",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=i-(s+(e-t.leftSide())/2);t.leftSide()<e&&t.topSide()<n&&t.oldY>n&&(t.y=n+.05)}},{key:"collidePlatTop",value:function(t,e){return t.bottomSide()>e&&t.oldY+t.height<e?t instanceof O?(t.setHit(),!0):(t.velY=0,t.y=e-t.height-.1,t instanceof v&&(t.onGround=!0,t.jumpCount=2),!0):(t instanceof v&&(t.onGround=!1),!1)}},{key:"collidePlatBottom",value:function(t,e){return t.topSide()<e&&t.oldY+t.height>e&&(t instanceof O&&t.setHit(),t.y=e+.1,t.velY=0,!0)}},{key:"collidePlatRight",value:function(t,e){return t.leftSide()<e&&t.oldX+t.width>e&&(t instanceof O&&t.setHit(),t.x=e+.1,!0)}},{key:"collidePlatLeft",value:function(t,e){return t.rightSide()>e&&t.oldX<e&&(t instanceof O&&t.setHit(),t.x=e-t.width-.1,!0)}},{key:"collidePlatform",value:function(t,e,i,s,n){s&&this.collisionPlatformKeys[s]&&this.collisionPlatformKeys[s](t,e,i,s,n)}}])&&b(e.prototype,i),s&&b(e,s),t}();function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,n=!1,h=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,h=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw h}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=x(e).call(this,t))||"object"!==S(n)&&"function"!=typeof n?j(s):n).proj=i.loadImage(t.image),i.velX=t.velX,i.velY=t.velY,i.oldX=i.x,i.oldY=i.y,i.dir=t.dir||"right",i.damage=t.damage,i.frameStartX=t.frameStartX,i.frameStartY=t.frameStartY,i.frameWidth=t.frameWidth,i.frameHeight=t.frameHeight,i.frameNum=t.frameNum,i.tileSize=60,i.collider=new w,i.isHit=!1,i.loadImage=i.loadImage.bind(j(i)),i.getTopLeftPos=i.getTopLeftPos.bind(j(i)),i.getTopRightPos=i.getTopRightPos.bind(j(i)),i.getBottomLeftPos=i.getBottomLeftPos.bind(j(i)),i.getBottomRightPos=i.getBottomRightPos.bind(j(i)),i.setHit=i.setHit.bind(j(i)),i.timeOutHit=i.timeOutHit.bind(j(i)),i.updateProjectile=i.updateProjectile.bind(j(i)),i.drawProjectile=i.drawProjectile.bind(j(i)),i.timeOutHit(),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,t),i=e,n=[{key:"fireball",value:function(t,e,i,s){return{pos:t,width:35,height:12,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:277,frameWidth:65,frameHeight:16,frameNum:8,image:"./assets/fireball.png",damage:25}}},{key:"fireballVert",value:function(t,e,i,s){return{pos:t,width:12,height:35,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:400,frameWidth:22,frameHeight:35,frameNum:8,image:"./assets/fireball.png",damage:25}}},{key:"helibullet",value:function(t,e,i,s){return{pos:t,width:25,height:25,velX:e,velY:i,dir:s,frameStartX:420,frameStartY:330,frameWidth:15,frameHeight:15,frameNum:1,image:"./assets/footEn.png",damage:10}}}],(s=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"setHit",value:function(){this.isHit=!this.isHit}},{key:"timeOutHit",value:function(){var t=this;this.hitTimeout=setTimeout((function(){t.setHit()}),2e3)}},{key:"platformCheck",value:function(){var t,e,i,s,n;if("left"===this.dir){var h=k(this.getTopLeftPos(),2);n=h[0],e=h[1],t=this.physicalMap[15*e+n],this.collider.collidePlatform(this,n*this.tileSize,e*this.tileSize,t);var r=k(this.getBottomLeftPos(),2);n=r[0],i=r[1],t=this.physicalMap[15*i+n],this.collider.collidePlatform(this,n*this.tileSize,i*this.tileSize,t)}if("right"===this.dir){var o=k(this.getTopRightPos(),2);s=o[0],e=o[1],t=this.physicalMap[15*e+s],this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t);var l=k(this.getBottomRightPos(),2);s=l[0],i=l[1],t=this.physicalMap[15*i+s],this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t)}}},{key:"updateProjectile",value:function(){this.oldX=this.x,this.oldY=this.y,this.x+=this.velX,this.y+=this.velY}},{key:"drawProjectile",value:function(t,e){this.hit||(this.updateProjectile(),"up"===this.dir?(t.scale(1,-1),t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,-this.y+this.height,this.width,this.height),t.scale(1,-1)):"down"===this.dir?t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):"right"===this.dir?t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.frameWidth,this.y,this.width,this.height),t.scale(-1,1)))}}])&&P(i.prototype,s),n&&P(i,n),e}(o);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=L(e).call(this,t))||"object"!==I(n)&&"function"!=typeof n?Y(s):n).velX=t.velX?t.velX:0,i.velY=t.velY?t.velY:0,i.enemy=i.loadImage(t.image),i.frameNum=t.frameNum,i.dir=t.dir||"right",i.frameStartX=68,i.frameStartY=290,i.frameWidth=116,i.frameHeight=80,i.projectiles={},i.dying=!1,i.dead=!1,i.health=t.health,i.damage=t.damage,i.isHit=!1,i.setHit=i.setHit.bind(Y(i)),i.setDying=i.setDying.bind(Y(i)),i.getMidX=i.getMidX.bind(Y(i)),i.getMidY=i.getMidY.bind(Y(i)),i.loadImage=i.loadImage.bind(Y(i)),i.drawEnemy=i.drawEnemy.bind(Y(i)),i.shootProj=i.shootProj.bind(Y(i)),i.callAttack=i.callAttack.bind(Y(i)),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,t),i=e,n=[{key:"helicopter",value:function(t){return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,velX:3,dir:"right",health:100,damage:10}}}],(s=[{key:"getMidX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x;return t+this.width/2}},{key:"getMidY",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.y;return t+this.height/2}},{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),500),this.health-=e)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new O(O.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new O(O.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),200)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}},{key:"hitBox",value:function(t,e){if(t.y<e.y+e.height&&t.y>e.y+e.height/2){if("right"===e.dir&&t.x<e.x+e.width&&t.x+t.width>e.x+e.width/3||"left"===e.dir&&t.x<e.x+e.width*(2/3)&&t.x+t.width>e.x)return!0}else if((t.y<e.height/2&&t.y>e.y||t.y+t.height>e.y)&&t.x<e.x+e.width&&t.x+t.width>e.x)return!0;return!1}}])&&C(i.prototype,s),n&&C(i,n),e}(o);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=H(e).call(this,t))||"object"!==E(n)&&"function"!=typeof n?z(s):n).velX=t.velX||3,i.velY=0,i.image=t.image||"./assets/footEn.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||3,i.frameStartX=t.frameStartX||68,i.frameStartY=t.frameStartY||290,i.frameWidth=t.frameWidth||116,i.frameHeight=t.frameHeight||80,i.projectiles={},i.bounds=t.bounds,i.loadImage=i.loadImage.bind(z(i)),i.drawEnemy=i.drawEnemy.bind(z(i)),i.shootProj=i.shootProj.bind(z(i)),i.callAttack=i.callAttack.bind(z(i)),i.callAttack(),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(e,t),i=e,n=[{key:"hel1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3?arguments[3]:void 0;return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,health:100,velX:"left"===i?-3:3,velY:s||0,dir:i,bounds:e}}},{key:"hel2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:150,height:85,health:100,velX:"left"===i?-3:3,dir:i,bounds:e}}}],(s=[{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new O(O.helibullet([this.leftSide()+.15*this.width,this.bottomSide()-.184*this.height],-9,7,"left")):this.projectiles[t]=new O(O.helibullet([this.rightSide()-.2*this.width,this.bottomSide()-.184*this.height],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),500)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,this.bounds?(this.x+this.width/2<this.bounds[0]||this.x+this.width/2>this.bounds[1])&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right"):(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}}])&&R(i.prototype,s),n&&R(i,n),e}(M);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=W(e).call(this,t))||"object"!==F(n)&&"function"!=typeof n?G(s):n).velX=t.velX||0,i.velY=t.velY||1,i.image=t.image,i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||4,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||92.5,i.frameHeight=t.frameHeight||102,i.frameCount=0,i.bounds=t.bounds,i.damage=t.damage,i.projectiles={},i.drawEnemy=i.drawEnemy.bind(G(i)),i.shootProj=i.shootProj.bind(G(i)),i.callAttack=i.callAttack.bind(G(i)),i.startFrameCount=i.startFrameCount.bind(G(i)),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(e,t),i=e,n=[{key:"spider1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:93,height:102,health:110,velX:0,velY:1,dir:i,damage:25,bounds:e}}},{key:"spider2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:60.5,height:76,health:70,velX:0,velY:1.5,dir:i,damage:30,bounds:e}}},{key:"spider3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:46.5,height:56,health:70,velX:0,velY:2.5,dir:i,bounds:e,damage:50}}}],(s=[{key:"startFrameCount",value:function(){var t=this;this.enemyInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"drawEnemy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.frameCount;if(this.setDying(),t.beginPath(),t.moveTo(this.getMidX(this.pos[0]),this.pos[1]),t.lineTo(this.getMidX(this.pos[0]),this.getMidY(this.y)),t.lineWidth=2,t.strokeStyle="rgba(255, 255, 255, 0.5)",t.stroke(),t.closePath(),!this.isHit&&!this.dying||e%3!=0){var i=Math.floor(e/2.5)%this.frameNum;t.scale(1,-1),t.drawImage(this.enemy,i%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,-this.y-this.height,this.width,this.height),t.scale(1,-1)}}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new O(O.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new O(O.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t){this.oldY=this.y,this.y+=this.velY,this.bounds?(this.y+this.height<this.bounds[0]||this.y+this.height>this.bounds[1])&&(this.velY*=-1):(this.y+this.height<0||this.y+this.height>t.height)&&(this.velY*=-1)}}])&&A(i.prototype,s),n&&A(i,n),e}(M);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=V(e).call(this,t))||"object"!==K(n)&&"function"!=typeof n?q(s):n).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=20,i.drawEnemy=i.drawEnemy.bind(q(i)),i.shootProj=i.shootProj.bind(q(i)),i.checkPlayerPos=i.checkPlayerPos.bind(q(i)),i.callAttack=i.callAttack.bind(q(i)),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,t),i=e,n=[{key:"vine1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:65,height:95,health:75,velX:1,dir:i,player:e}}},{key:"vine2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:100,height:145,health:120,velX:1,dir:i,player:e}}},{key:"vine3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:35,height:45,health:50,velX:1,dir:i,player:e}}}],(s=[{key:"checkPlayerPos",value:function(t,e,i){var s=this;e>this.y?this.velY=1:this.velY=-1,e>this.y&&e<this.y+this.height&&(t>this.x||t<this.x)?this.velX="left"===this.dir?-5:5:this.velX="left"===this.dir?-1:1,t>this.x&&"left"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=1,s.dir="right"}),1e3):t<this.x&&"right"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=-1,s.dir="left"}),1e3):(t>this.x&&"right"===this.dir||t<this.x&&"left"===this.dir)&&clearTimeout(this.playerCheckTimeout)}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2)}},{key:"drawEnemy",value:function(t,e){this.setDying(),(!this.isHit&&!this.dying||e%3!=0)&&("right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(e/1.5)%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new O(O.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new O(O.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t,e,i){this.oldY=this.y,this.oldX=this.x,this.x+=this.velX,this.y+=this.velY,this.checkPlayerPos(e,i)}}])&&U(i.prototype,s),n&&U(i,n),e}(M);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=function(t){function e(t){var i,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(n=tt(e).call(this,t))||"object"!==Z(n)&&"function"!=typeof n?et(s):n).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=50,i.attacking=!1,i.charging=!1,i.frameCount=0,i.drawEnemy=i.drawEnemy.bind(et(i)),i.shootProj=i.shootProj.bind(et(i)),i.checkPlayerPos=i.checkPlayerPos.bind(et(i)),i.callAttack=i.callAttack.bind(et(i)),i.charge=i.charge.bind(et(i)),i.startFrameCount=i.startFrameCount.bind(et(i)),i.startFrameCount(),i}var i,s,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,t),i=e,n=[{key:"boss1",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:260,height:370,health:1200,velX:0,dir:"left",player:e}}}],(s=[{key:"startFrameCount",value:function(){var t=this;this.bossInterval=setInterval((function(){t.frameCount++}),1e3/30),this.attackTimeout=setTimeout((function(){t.attack()}),1e3)}},{key:"spawnEnemies",value:function(){}},{key:"attack",value:function(){var t=this;this.attacking=!0,this.chargeTimeout=setTimeout((function(){t.charge()}),2500)}},{key:"charge",value:function(){this.charging=!0,this.velX=-10}},{key:"checkPlayerPos",value:function(t,e,i){}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2)}},{key:"drawEnemy",value:function(t,e){if(this.setDying(),!this.isHit&&!this.dying||e%3!=0){var i=this.attacking&&(this.frameCount%3==0||this.frameCount%3==1)||this.charging?87:this.frameStartY;"right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(this.frameCount/1.5)%this.frameNum*this.frameWidth,i,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,this.frameCount%this.frameNum*this.frameWidth+this.frameStartX,i,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1))}}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new O(O.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new O(O.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"backUp",value:function(){this.charging=!1,this.velX=2}},{key:"move",value:function(t,e,i){var s=this;this.oldX=this.x,this.x+=this.velX,this.x<160?(this.x=160,this.backUp()):this.x>650&&(this.velX=0,this.attacking=!1,this.x=650,this.attackTimeout=setTimeout((function(){s.attack()}),1e4))}}])&&$(i.prototype,s),n&&$(i,n),e}(M);function nt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ht=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e.ctx,this.player=e.player,this.mapKeys=e.mapKeys,this.screen=1,this.renderMap=e.renderMap||this.mapKeys[this.screen].renderMap,this.physicalMap=e.physicalMap||this.mapKeys[this.screen].physicalMap,this.cols=15,this.rows=10,this.tileSize=e.tileSize,this.tileMap=this.loadImage(),this.mapTileSize=this.tileMap.width/this.rows,this.enemies=this.mapKeys[this.screen].enemies,this.enemyCount=1,this.theme=new a({src:this.mapKeys[this.screen].theme}),this.levelLayers=this.loadImages(this.mapKeys[this.screen].levelLayers),this.getTile=this.getTile.bind(this),this.getLeft=this.getLeft.bind(this),this.getRight=this.getRight.bind(this),this.getTop=this.getTop.bind(this),this.getBottom=this.getBottom.bind(this),this.drawLevel=this.drawLevel.bind(this),this.loadImage=this.loadImage.bind(this),this.loadLevel=this.loadLevel.bind(this),this.enemiesInterval=this.enemiesInterval.bind(this),this.spawnEnemies=this.spawnEnemies.bind(this),this.loadImages=this.loadImages.bind(this),this.renderBackground=this.renderBackground.bind(this),this.renderMid=this.renderMid.bind(this),this.renderFront=this.renderFront.bind(this),this.enemiesInterval()}var e,i,s;return e=t,s=[{key:"level1",value:function(){return{1:{renderMap:[9,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,39,0,0,0,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,22,23,23,63,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,29,29,29,29,9,0,0,0,0,0,0,0,0,0,0,3,27,27,27,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,3,3,3,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,2,2,2,24,0,0,0,1,2,34,0,0,0,0,17,0,0,0,18,0,0,0,0,0,0,34,0,0,0,17,0,0,0,18,0,0,0,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1],enemies:{},theme:"./assets/Sound/ff9_stirring_forest.mp3",levelLayers:{background:"./assets/Level1/lv1_back.png",mid:"./assets/Level1/lv1_mid.png",front:"./assets/Level1/lv1_front.png"}},2:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,0,0,0,0,0,0,0,0,0,0,53,54,1,1,2,0,0,0,0,0,0,0,0,0,57,58,9,16,16,16,0,0,29,29,29,29,0,53,54,5,5,0,0,0,0,0,0,3,1,1,1,1,5,5,5,11,0,0,0,0,0,0,5,5,5,5],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,12,39,0,0,0,0,17,0,0,0,0,0,0,0,0,4,17,0,0,0,0,17,0,0,0,19,20,0,0,0,4,30,30,0,0,0,17,0,0,0,4,5,0,0,37,4,40,0,0,0,0,31,16,0,0,9,8,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,31,15,15,15,0,0,0,0,0,35,0,5,0,0,0,0,4,0,0,1,1,1,1,2,0,0,5,0,0,0,0,4,0,0],levelLayers:{background:"./assets/Level1/lvl2_back.png",mid:"./assets/Level1/lvl2_mid.png",front:"./assets/Level1/lvl2_front.png"},enemies:{1:new _(_.hel2([10,10],[0,700])),3:new _(_.hel2([10,140],[0,335],"left")),4:new D(D.spider1([600,0],[0,380])),5:new D(D.spider2([520,0],[20,440])),6:new D(D.spider3([150,0],[20,250]))}},3:{renderMap:[0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,16,8,0,0,0,16,0,0,0,16,0,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,4,50,5,5,29,29,29,30,0,0,0,0,0,0,0,4,5,5,5,0,0,40,0,0,0,0,0,0,0,0,55,5,40,5,0,5,0,0,0,0,0,0,0,0,0,0,5,5,5],physicalMap:[0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,33,0,0,0,0,0,0,37,39,0,18,0,0,0,0,41,34,0,0,0,37,39,0,0,16,8,0,0,0,0,0,0,0,0,0,4,1,1,1,0,0,0,0,0,0,33,33,33,0,0,44,16,42,3,15,15,15,30,0,0,16,16,45,0,0,0,0,0,0,5,0,40,0,0,0,0,0,0,0,0,0,0,0,0,5,5,0,0,15,15,15,15,15,20,0,33,33,33,33],enemies:{},levelLayers:{background:"./assets/Level1/lvl3_back.png",mid:"./assets/Level1/lvl3_mid.png",front:"./assets/Level1/lvl3_front.png"}},4:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3,1,1,1,2,0,0,0,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,4,28,1,1,1,0,0,0,0,0,0,0,0,3,1,1,1,9,0,0,0,0,0,0,0,0,0,0,16,16,16,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,0,1,1,1,1],physicalMap:[0,0,38,39,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,39,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,3,1,1,1,8,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,3,1,1,1,9,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,0,0,0,0,0,0,0,0,0,0,9,0,0,0,10,0,1,1,1,1],enemies:{1:new _(_.hel2([500,0])),4:new Q(Q.vine3([500,100],this.player)),5:new Q(Q.vine3([300,450],this.player)),6:new Q(Q.vine3([850,500],this.player)),7:new Q(Q.vine1([800,-20],this.player))}},5:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,29,29,29,29,0,29,29,29,29,29,29,29,1,1,1,1,1,1,2,0,3,1,1,1,1,1,1,5,9,0,0,0,0,0,0,0,0,0,0,13,5,5,28,0,0,0,0,0,0,0,0,0,0,0,0,4,28,1,1,2,0,0,0,0,0,0,0,0,3,1,1,1,16,16,16,0,0,0,0,0,0,0,0,5,5,5,5,0,0,0,0,0,29,29,29,29,29,3,1,1,1,1,0,0,0,0,0,3,1,1,1,2,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,1,1,1,1,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:{1:new Q(Q.vine3([10,530],this.player)),2:new Q(Q.vine3([830,0],this.player)),3:new Q(Q.vine2([600,600],this.player)),4:new Q(Q.vine1([500,100],this.player)),5:new Q(Q.vine2([200,450],this.player)),6:new Q(Q.vine2([850,500],this.player)),7:new Q(Q.vine1([800,-20],this.player))}},6:{renderMap:[0,0,0,0,0,0,0,13,5,5,5,49,5,5,5,0,0,0,0,0,0,0,0,16,16,16,16,16,16,16,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,28,9,0,0,0,0,0,0,0,0,0,0,0,0,0,5,29,29,29,0,29,29,0,47,47,47,47,47,47,47,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:{1:new st(st.boss1([500,100],this.player))},theme:"./assets/Sound/dk3_boss_boogie.mp3"}}}}],(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"loadImages",value:function(t){var e=new Image;e.src=t.background;var i=t.mid?new Image:null;i&&(i.src=t.mid);var s=t.front?new Image:null;return s&&(s.src=t.front),{background:e,mid:i,front:s}}},{key:"renderBackground",value:function(t,e){t.drawImage(this.levelLayers.background,0,0,900,600,0,0,e.width,e.height)}},{key:"renderMid",value:function(t,e){t.drawImage(this.levelLayers.mid,0,0,900,600,0,0,e.width,e.height)}},{key:"renderFront",value:function(t,e){t.drawImage(this.levelLayers.front,0,0,900,600,0,0,e.width,e.height)}},{key:"getTile",value:function(t,e){return this.renderMap[e*this.cols+t]}},{key:"getLeft",value:function(t,e){return Math.floor(t*this.tileSize)}},{key:"getRight",value:function(t,e){return Math.floor(t*this.tileSize+this.tileSize)}},{key:"getTop",value:function(t,e){return Math.floor(e*this.tileSize-this.tileSize)}},{key:"getBottom",value:function(t,e){return Math.floor(e*this.tileSize)}},{key:"enemiesInterval",value:function(){var t=this;this.screen<6||(this.spawnInterval=setInterval((function(){t.enemies[1]||clearInterval(t.spawnInterval),t.spawnEnemies()}),8e3))}},{key:"spawnEnemies",value:function(){if(!(Object.keys(this.enemies).length>=8)){this.enemyCount++;var t=this.enemyCount,e=600*Math.random();this.enemies[t]=new Q(Q.vine2([890,e],this.player,"left"))}}},{key:"loadLevel",value:function(t){if(this.screen+=t,this.renderMap=this.mapKeys[this.screen].renderMap,this.physicalMap=this.mapKeys[this.screen].physicalMap,this.enemies=this.mapKeys[this.screen].enemies,this.mapKeys[this.screen].levelLayers&&(this.levelLayers=this.loadImages(this.mapKeys[this.screen].levelLayers)),this.mapKeys[this.screen].theme){var e=this.theme.music.muted;this.theme.pause(),this.theme=new a({src:this.mapKeys[this.screen].theme}),this.theme.play(),this.theme.music.muted=e}this.enemiesInterval()}},{key:"drawLevel",value:function(t){for(var e=0;e<this.cols;e++)for(var i=0;i<this.rows;i++){var s=this.getTile(e,i),n=s%8==0?8:s%8;s>0&&t.drawImage(this.tileMap,(n-1)*(this.tileMap.width/8),Math.floor(s/8)*(this.tileMap.width/8),64,64,e*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize)}}}])&&nt(e.prototype,i),s&&nt(e,s),t}();function rt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fire=this.loadImage(),this.drawHealth=this.drawHealth.bind(this),this.loadImage=this.loadImage.bind(this),this.drawHUD=this.drawHUD.bind(this),this.drawAmmo=this.drawAmmo.bind(this)}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/fireball.png",t}},{key:"drawHUD",value:function(t,e,i,s){e.beginPath(),e.rect(0,t.height-40,t.width,40),e.fillStyle="black",e.fill(),e.closePath(),this.drawHealth(t,e,i),this.drawAmmo(t,e,i,s)}},{key:"drawHealth",value:function(t,e,i){var s=t.width/3*(i.health/200);e.beginPath(),e.rect(20,t.height-30,t.width/3,18),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.closePath(),e.beginPath(),e.rect(20,t.height-30,s,18),e.fillStyle="red",e.fill(),e.closePath()}},{key:"drawAmmo",value:function(t,e,i,s){var n=t.width-50;switch(e.beginPath(),e.arc(n,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-100,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-150,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),Object.keys(i.fireballs).length){case 0:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-165,t.height-40,30,30);case 1:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-114,t.height-40,30,30);case 2:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,25,35,t.width-64,t.height-40,30,30)}}}])&&rt(e.prototype,i),s&&rt(e,s),t}();function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,n=!1,h=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,h=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw h}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function at(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ct=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.player=new v(this.ctx,this.canvas),this.controller=new h(this.player),this.tileSize=this.canvas.width/15,this.level=new ht({ctx:i,mapKeys:ht.level1(),player:this.player,tileSize:this.tileSize}),this.collider=new w(this.tileSize),this.HUD=new ot,this.frameCount=0,this.enemies=this.level.enemies,this.gameOver=!1,this.embers=new Image,this.embers.src="./assets/embers.jpg",this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this),this.playerPlatformCheck=this.playerPlatformCheck.bind(this),this.playerUpdate=this.playerUpdate.bind(this),this.projectilePlatformCheck=this.projectilePlatformCheck.bind(this),this.renderFireballs=this.renderFireballs.bind(this),this.renderEnemies=this.renderEnemies.bind(this),this.renderEnemyProjectiles=this.renderEnemyProjectiles.bind(this),this.startFrameCount=this.startFrameCount.bind(this),this.runGame=this.runGame.bind(this),this.isGameOver=this.isGameOver.bind(this),this.win=this.win.bind(this),this.enemiesCleared=this.enemiesCleared.bind(this),this.loadLevel=this.loadLevel.bind(this),this.resizeGame=this.resizeGame.bind(this),this.enemyCount=Object.keys(this.enemies).length,this.cleared=!1,this.startFrameCount()}var e,i,s;return e=t,(i=[{key:"startFrameCount",value:function(){var t=this;this.frameInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"resizeGame",value:function(t){this.tileSize=t.width/15,this.level.tileSize=this.tileSize}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"enemiesCleared",value:function(){return 0===Object.keys(this.enemies).length&&(this.cleared=!0,!0)}},{key:"playerPlatformCheck",value:function(){var t,e,i,s,n,h=0,r=this.level.physicalMap,o=lt(this.getTopLeftPos(),2);n=o[0],33===(t=r[15*(e=o[1])+n])&&h++,this.collider.collidePlatform(this.player,n*this.tileSize,e*this.tileSize,t,this.tileSize);var l=lt(this.getTopRightPos(),2);s=l[0],33===(t=r[15*(e=l[1])+s])&&h++,this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t,this.tileSize);var a=lt(this.getBottomLeftPos(),2);n=a[0],0===(t=r[15*(i=a[1])+n])&&h++,33===t&&h++,this.collider.collidePlatform(this.player,n*this.tileSize,i*this.tileSize,t,this.tileSize);var c=lt(this.getBottomRightPos(),2);s=c[0],0===(t=r[15*(i=c[1])+s])&&h++,33===t&&h++,this.player.canClimb&&(this.player.canClimb=!1),2===h&&(this.player.onGround=!1),this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t,this.tileSize)}},{key:"projectilePlatformCheck",value:function(t){var e,i,s,n,h,r=this.level.physicalMap;if("left"===t.dir){var o=lt(t.getTopLeftPos(),2);h=o[0],e=r[15*(i=o[1])+h],this.collider.collidePlatform(t,h*this.tileSize,i*this.tileSize,e,this.tileSize);var l=lt(t.getBottomLeftPos(),2);h=l[0],e=r[15*(s=l[1])+h],this.collider.collidePlatform(t,h*this.tileSize,s*this.tileSize,e,this.tileSize)}if("right"===t.dir){var a=lt(t.getTopRightPos(),2);n=a[0],e=r[15*(i=a[1])+n],this.collider.collidePlatform(t,n*this.tileSize,i*this.tileSize,e,this.tileSize);var c=lt(t.getBottomRightPos(),2);n=c[0],e=r[15*(s=c[1])+n],this.collider.collidePlatform(t,n*this.tileSize,s*this.tileSize,e,this.tileSize)}}},{key:"playerUpdate",value:function(){this.player.setRunning(),this.player.isIdle(),this.player.setOldPos(),this.player.idle||(this.player.x+=this.player.velX),this.player.climbing?this.player.isClimbing():this.player.inAir(),this.collider.collidePlayer(this.player,this.canvas,this.cleared),this.playerPlatformCheck()}},{key:"renderEnemies",value:function(){if(6===this.level.screen&&(this.enemyCount=Object.keys(this.level.enemies).length),!this.cleared){for(var t in this.enemies)this.enemies[t].dying&&!this.enemies[t].dead||(this.projectilePlatformCheck(this.enemies[t]),this.enemies[t].dead?(delete this.enemies[t],this.enemyCount-=1):(this.enemies[t].move(this.canvas,this.player.x,this.player.y),this.collider.collideEnemy(this.player,this.enemies[t]),this.enemies[t].drawEnemy(this.ctx,this.frameCount)));this.enemiesCleared()}}},{key:"renderFireballs",value:function(){if(0!==Object.keys(this.player.fireballs).length)for(var t in this.player.fireballs){var e=this.player.fireballs[t];if(0!==this.enemyCount)for(var i in this.enemies)this.collider.collideEnemy(e,this.enemies[i]);this.projectilePlatformCheck(e),e.isHit?delete this.player.fireballs[t]:e.drawProjectile(this.ctx,this.frameCount)}}},{key:"renderEnemyProjectiles",value:function(){var t=this;Object.values(this.enemies).forEach((function(e){if(0!==Object.keys(e.projectiles).length)for(var i in e.projectiles)t.collider.collideProjectile(t.player,e.projectiles[i]),t.projectilePlatformCheck(e.projectiles[i]),e.projectiles[i].isHit?delete e.projectiles[i]:e.projectiles[i].drawProjectile(t.ctx,t.frameCount)}))}},{key:"loadLevel",value:function(){this.player.x+this.player.width/2>=this.canvas.width?(this.level.loadLevel(1),this.cleared=!1,this.enemies=this.level.enemies,this.enemyCount=Object.keys(this.enemies),this.player.x=0):this.player.x+this.player.width/2<=0&&(this.level.loadLevel(-1),this.player.x=this.canvas.width-this.player.width)}},{key:"isGameOver",value:function(){this.win(),this.gameOver=!(!this.player.dead&&!this.won)}},{key:"win",value:function(){this.won=6===this.level.screen&&0===Object.keys(this.enemies).length}},{key:"runGame",value:function(){this.isGameOver(),this.gameOver?this.won?(this.level.theme.pause(),this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("CONGRATS!",this.canvas.width/2,160),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("YOU BEAT LEVEL 1",this.canvas.width/2,this.canvas.height/2),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,400)):(this.level.theme.pause(),this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="130px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,400)):(this.loadLevel(),this.level.renderBackground(this.ctx,this.canvas),this.level.screen>3&&this.level.drawLevel(this.ctx),this.player.drawPlayer(this.frameCount),this.playerUpdate(),this.level.screen<4&&(this.level.renderMid(this.ctx,this.canvas),this.level.renderFront(this.ctx,this.canvas)),this.renderEnemies(),this.renderEnemyProjectiles(),this.renderFireballs(),this.HUD.drawHUD(this.canvas,this.ctx,this.player,this.frameCount))}}])&&at(e.prototype,i),s&&at(e,s),t}();function ut(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ft=function(){function t(e,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.game=null,this.splash=new Image,this.splash.src="./assets/firegirl.jpg",this.renderGame=this.renderGame.bind(this),this.loadImage=this.loadImage.bind(this),this.newGame=this.newGame.bind(this),window.addEventListener("keydown",(function(t){s.game&&!s.game.gameOver||13!==t.keyCode?77===t.keyCode&&s.game.level.theme.mute():s.newGame()})),window.addEventListener("resize",(function(){s.game&&s.game.resizeGame(s.canvas)}))}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"newGame",value:function(){this.game&&!this.game.gameOver||(this.game=new ct(this.canvas,this.ctx),this.game.level.theme.play())}},{key:"renderGame",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.game||(this.ctx.drawImage(this.splash,0,0,920,644,0,0,this.canvas.width,this.canvas.height),this.ctx.font="50px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("FIRE GIRL",this.canvas.width/2,this.canvas.height/3),this.ctx.font="1.1em Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play",this.canvas.width/2,this.canvas.height*(2/3))),this.game&&this.game.runGame(),window.requestAnimationFrame(this.renderGame)}}])&&ut(e.prototype,i),s&&ut(e,s),t}();window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("gameCanvas"),e=t.getContext("2d");new ft(t,e).renderGame()}))}]);
//# sourceMappingURL=main.js.map