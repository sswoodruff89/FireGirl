!function(t){var e={};function i(s){if(e[s])return e[s].exports;var h=e[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)i.d(s,h,function(e){return t[e]}.bind(null,h));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.keysPressed={},this.keydown=this.keydown.bind(this),this.keyup=this.keyup.bind(this),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}var e,i,h;return e=t,(i=[{key:"keydown",value:function(e){switch(e.preventDefault(),this.player.idle=!1,this.player.keydown=!0,t.KEYS[e.key]){case"left":this.keysPressed.left=!0,this.player.direction="left",this.player.velX=-7;break;case"right":this.keysPressed.right=!0,this.player.direction="right",this.player.velX=7;break;case"up":this.keysPressed.up=!0,this.player.upPressed=this.keysPressed.up,this.player.canClimb&&(console.log(this.player.canClimb),console.log(this.player.idle),this.player.climbing=!0,this.player.velY=-7);break;case"down":this.keysPressed.down=!0,this.player.canClimb&&(console.log(this.player.canClimb),this.player.climbing=!0,this.player.velY=7);break;case"jump":this.keysPressed.jump=!0,this.player.jump();break;case"fire":this.keysPressed.fire=!0,this.keysPressed.up?this.player.shootFire("up"):this.keysPressed.down&&!this.player.onGround?this.player.shootFire("down"):this.player.shootFire();break;case"dash":this.keysPressed.dash=!0;case"space":break;default:return}}},{key:"keyup",value:function(e){switch(e.preventDefault(),t.KEYS[e.key]){case"left":this.keysPressed.left=!1,this.player.runningKeyDown=!1,this.keysPressed.left||this.keysPressed.right||(this.player.velX=0);break;case"right":this.keysPressed.right=!1,this.keysPressed.left||this.keysPressed.right||(this.player.velX=0);break;case"up":this.keysPressed.up=!1,this.player.upPressed=this.keysPressed.up,this.player.climbing&&(this.player.climbing=!1);break;case"down":this.keysPressed.down=!1;break;case"jump":this.keysPressed.jump=!1;break;case"fire":this.keysPressed.fire=!1;break;case"dash":this.keysPressed.dash=!1;case"space":break;default:return}this.player.idle=!0}}])&&s(e.prototype,i),h&&s(e,h),t}();h.KEYS={space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down",a:"jump",d:"fire",s:"dash",Enter:"enter"};var r=h;function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.pos=e.pos,this.ctx=e.ctx,this.canvas=e.canvas,this.width=e.width,this.height=e.height,this.x=e.pos[0],this.y=e.pos[1],this.oldX=this.x,this.oldY=this.y,this.tileSize=60,this.rightSide=this.rightSide.bind(this),this.leftSide=this.leftSide.bind(this),this.topSide=this.topSide.bind(this),this.bottomSide=this.bottomSide.bind(this),this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this)}var e,i,s;return e=t,(i=[{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}}])&&n(e.prototype,i),s&&n(e,s),t}();function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.music=document.createElement("audio"),this.music.src=e.src,this.music.id="theme",this.music.setAttribute("preload","auto"),this.music.setAttribute("controls","none"),this.music.setAttribute("loop","true"),this.music.setAttribute("muted","false"),this.music.style.display="none",this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.mute=this.mute.bind(this)}var e,i,s;return e=t,(i=[{key:"play",value:function(){this.music.play()}},{key:"pause",value:function(){this.music.pause()}},{key:"mute",value:function(){this.music.muted=!this.music.muted}}])&&o(e.prototype,i),s&&o(e,s),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=d(this,f(e).call(this,{name:t.name,pos:t.pos,ctx:t.ctx,width:t.width,height:t.height}))).vel=[0,0],i.health=200,i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),i=e,(s=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/SeisaSpriteSheet.png",t}}])&&u(i.prototype,s),h&&u(i,h),e}(a);function y(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=1,v=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.canvas=i,this.character=new p({name:"Seisa",pos:[20,210],ctx:this.ctx,canvas:this.canvas,width:42.5,height:82}),this.health=this.character.health,this.damageMeter=0,this.damageBoost=!1,this.spriteMap=this.character.loadImage(),this.fireballs={},this.vel=this.character.vel,this.x=this.character.x,this.y=this.character.y,this.idleWidth=42.5,this.runWidth=57,this.attackWidth=this.oldX=this.x,this.oldY=this.y,this.width=this.character.width,this.height=this.character.height,this.velX=this.vel[0],this.velY=this.vel[1],this.onGround=!1,this.idle=!0,this.keydown=!1,this.runningKeyDown=!1,this.isRunning=!1,this.direction="right",this.jumpCount=2,this.canClimb=!1,this.climbing=!1,this.frameCount=0,this.attacking=!1,this.aura=this.loadImage("./assets/aura.png"),this.upPressed=!1,this.attackAnimTimeout="",this.dashing=!1,this.isHit=!1,this.dying=!1,this.dead=!1,this.drawPlayer=this.drawPlayer.bind(this),this.jump=this.jump.bind(this),this.shootFire=this.shootFire.bind(this),this.blueFire=this.blueFire.bind(this),this.fire=this.fire.bind(this),this.drawAttack=this.drawAttack.bind(this),this.drawRunning=this.drawRunning.bind(this),this.drawIdle=this.drawIdle.bind(this),this.drawSprite=this.drawSprite.bind(this),this.drawJump=this.drawJump.bind(this),this.loadImage=this.loadImage.bind(this),this.setOldPos=this.setOldPos.bind(this),this.inAir=this.inAir.bind(this),this.isIdle=this.isIdle.bind(this),this.whichDirection=this.whichDirection.bind(this),this.setRunning=this.setRunning.bind(this),this.setHit=this.setHit.bind(this),this.setDamageMeter=this.setDamageMeter.bind(this),this.damageBoostCountdown=this.damageBoostCountdown.bind(this),this.setDying=this.setDying.bind(this),this.isClimbing=this.isClimbing.bind(this),this.getDirX=this.getDirX.bind(this),this.getDirY=this.getDirY.bind(this)}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"drawPlayer",value:function(t){this.setDying(),this.isHit&&t%3==0||(0===this.velX?"right"===this.direction?this.ctx.drawImage(this.spriteMap,0,529,89,175,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,0,529,89,175,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)):this.velX>0?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%12*126.25+1,0,126.25,175,this.x,this.y,this.width+5,this.height):this.velX<0&&(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%12*126.25+1,0,126.25,175,-this.x-this.width,this.y,this.width+5,this.height),this.ctx.scale(-1,1)))}},{key:"drawRunning",value:function(t){"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%12*126.4+1,0,126.4,175,this.x,this.y,this.width+5,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%12*126.4+1,0,126.4,175,-this.x-this.width,this.y,this.width+5,this.height),this.ctx.scale(-1,1))}},{key:"drawAttack",value:function(t,e){switch(e){case"jumping":this.velY<0?"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*108,1145,108,172,this.x,this.y,this.width+5,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*108,1145,108,172,-this.x-this.width,this.y,this.width+5,this.height),this.ctx.scale(-1,1)):this.velY>0&&("right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*108,1510,108,175,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*108,1510,108,175,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)));break;case"running":"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*160,176,160,175,this.x,this.y,this.width+this.width/3,this.height):"left"===this.direction&&(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*160,176,160,175,-this.x-this.width,this.y,this.width+this.width/3,this.height),this.ctx.scale(-1,1));break;default:"right"===this.direction?this.upPressed?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*89,730,89,195,this.x,this.y-this.height/10,this.width,1.1*this.height):this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*125.1,353,123.25,175,this.x,this.y,this.width+this.width/2.5,this.height):"left"===this.direction&&(this.ctx.scale(-1,1),this.upPressed?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*89,730,89,195,-this.x-this.width,this.y-this.height/10,this.width,1.1*this.height):this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%4*125.1,353,123.25,175,-this.x-this.width,this.y,this.width+this.width/2.5,this.height),this.ctx.scale(-1,1))}}},{key:"drawJump",value:function(t){!this.onGround&&this.velY<0?"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*94,959,94,176,this.x,this.y,this.width-this.width/8,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%3*94,959,94,176,-this.x-this.width,this.y,this.width-this.width/8,this.height),this.ctx.scale(-1,1)):!this.onGround&&this.velY>1&&("right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%2*98,1325,98,175,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%2*98,1325,98,175,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)))}},{key:"drawIdle",value:function(t){"right"===this.direction?this.ctx.drawImage(this.spriteMap,0,529,89,175,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,0,529,89,175,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1))}},{key:"drawSprite",value:function(t){this.setDying(),this.damageBoost&&this.ctx.drawImage(this.aura,Math.floor(t/3)%4*82,0,82,93,this.x-28,this.y-42,100,130),this.isHit&&t%3==0||(this.velY>=0&&this.velY<=1?this.isRunning?this.attacking?this.drawAttack(t,"running"):this.drawRunning(t):this.attacking?this.drawAttack(t,null):this.drawIdle(t):this.onGround||(this.attacking?this.drawAttack(t,"jumping"):this.drawJump(t)),this.damageBoost&&this.ctx.drawImage(this.aura,Math.floor(t/3)%4*82,0,82,93,this.x-28,this.y-42,100,130))}},{key:"shootFire",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.damageBoost?this.blueFire(t):this.fire(t)}},{key:"blueFire",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=null,s=1;s<=Object.keys(this.fireballs).length;s++)if(!this.fireballs[s]){i=s;break}i=i||Object.keys(this.fireballs).length+1,clearTimeout(this.attackAnimTimeout),this.attacking=!0,this.attackAnimTimeout=setTimeout((function(){t.attacking=!1}),200),"right"===this.direction?"up"===e?this.fireballs[i]=new Y(Y.blueFireballVert([this.rightSide()-this.width/2,this.y+this.height],0,-30,e)):"down"===e?(this.fireballs[i]=new Y(Y.blueFireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,30,e)),this.velY=-3):this.fireballs[i]=new Y(Y.blueFireball([this.rightSide()-this.width/10,this.topSide()+this.height/5],30,0,"right")):"left"===this.direction&&("up"===e?this.fireballs[i]=new Y(Y.blueFireballVert([this.rightSide()-.75*this.width,this.y+this.height],0,-30,e)):"down"===e?(this.fireballs[i]=new Y(Y.blueFireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,30,e)),this.velY-=10,this.jumpCount-=1):this.fireballs[i]=new Y(Y.blueFireball([this.leftSide()-(this.width+this.width/2),this.topSide()+this.height/5],-30,0,"left"))),this.fireballs[i].launchSound.play()}},{key:"fire",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(3!==Object.keys(this.fireballs).length){for(var i,s=1;s<=3;s++)if(!this.fireballs[s]){i=s,clearTimeout(this.attackAnimTimeout),this.attacking=!0,this.attackAnimTimeout=setTimeout((function(){t.attacking=!1}),200);break}"right"===this.direction?"up"===e?this.fireballs[i]=new Y(Y.fireballVert([this.rightSide()-this.width/2,this.y+this.height],0,-20,e)):"down"===e?(this.fireballs[i]=new Y(Y.fireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,20,e)),this.velY=-3):this.fireballs[i]=new Y(Y.fireball([this.rightSide()-this.width/10,this.topSide()+this.height/5],20,0,"right")):"left"===this.direction&&("up"===e?this.fireballs[i]=new Y(Y.fireballVert([this.rightSide()-.75*this.width,this.y+this.height],0,-20,e)):"down"===e?(this.fireballs[i]=new Y(Y.fireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,20,e)),this.velY-=10,this.jumpCount-=1):this.fireballs[i]=new Y(Y.fireball([this.leftSide()-(this.width+this.width/2),this.topSide()+this.height/5],-20,0,"left"))),this.fireballs[i].launchSound.play()}else this.attacking=!1}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),2e3),this.health-=e,this.setDamageMeter(e))}},{key:"setDamageMeter",value:function(t){this.damageBoost||(this.damageMeter+=t,this.damageMeter>=100&&(this.damageMeter=100,this.damageBoost=!0,this.damageBoostCountdown()))}},{key:"damageBoostCountdown",value:function(){var t=this;this.damageMeterInterval=setInterval((function(){t.damageMeter-=1,t.damageMeter<=0&&(t.damageMeter=0,clearInterval(t.damageMeterInterval),t.damageBoost=!1)}),100)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.health=0,this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"setOldPos",value:function(){this.oldX=this.x,this.oldY=this.y}},{key:"getDirX",value:function(){return this.x+this.velX}},{key:"getDirY",value:function(){return this.y+this.velY}},{key:"isIdle",value:function(){0===this.velX&&0===this.velY?this.idle=!0:this.idle=!1}},{key:"inAir",value:function(){this.onGround?this.velY=0:(this.y+=this.velY,this.velY+g>25?this.velY=25:this.velY+=g)}},{key:"isClimbing",value:function(){this.climbing&&this.canClimb&&this.keydown?this.y+=this.velY:this.velY=0}},{key:"jump",value:function(){2===this.jumpCount?(this.onGround=!1,this.velY=-15,this.jumpCount=1):1===this.jumpCount&&(this.velY=-15,this.jumpCount=0)}},{key:"climb",value:function(){this.climb=!this.climb}},{key:"setRunning",value:function(){0!==this.velX?(this.isRunning=!0,this.width=this.runWidth):(this.isRunning=!1,this.width=this.idleWidth)}},{key:"whichDirection",value:function(){this.direction=this.velX>=0?"right":"left"}}])&&y(e.prototype,i),s&&y(e,s),t}();function b(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var w=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collidePlayer=this.collidePlayer.bind(this),this.collidePlatform=this.collidePlatform.bind(this),this.collidePlatTop=this.collidePlatTop.bind(this),this.collidePlatBottom=this.collidePlatBottom.bind(this),this.collidePlatLeft=this.collidePlatLeft.bind(this),this.collidePlatRight=this.collidePlatRight.bind(this),this.collideSlopeFortyFiveRight=this.collideSlopeFortyFiveRight.bind(this),this.collideSlopeFortyFiveRightBottom=this.collideSlopeFortyFiveRightBottom.bind(this),this.collideSlopeFortyFiveLeft=this.collideSlopeFortyFiveLeft.bind(this),this.collideSlopeFortyFiveLeftBottom=this.collideSlopeFortyFiveLeftBottom.bind(this),this.collideSlopeTwentyLeft=this.collideSlopeTwentyLeft.bind(this),this.collideSlopeTwentyLeftBottom=this.collideSlopeTwentyLeftBottom.bind(this),this.collideSlopeTwentyRight=this.collideSlopeTwentyRight.bind(this),this.collideSlopeTwentyRightBottom=this.collideSlopeTwentyRightBottom.bind(this),this.climbable=this.climbable.bind(this),this.collideEnemy=this.collideEnemy.bind(this),this.collisionPlatformKeys={1:function(t,i,s,h,r){e.collidePlatTop(t,s)},2:function(t,i,s,h,r){t.velY>0&&e.collidePlatTop(t,s)},3:function(t,i,s,h,r){e.collidePlatBottom(t,s+r)},4:function(t,i,s,h,r){e.collidePlatLeft(t,i)},5:function(t,i,s,h,r){e.collidePlatRight(t,i+r)},6:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatLeft(t,i)},7:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatRight(t,i+r)},8:function(t,i,s,h,r){e.collidePlatBottom(t,s+r)||e.collidePlatLeft(t,i)},9:function(t,i,s,h,r){e.collidePlatBottom(t,s+r)||e.collidePlatRight(t,i)},10:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+r)},11:function(t,i,s,h,r){if(t.velY>0){if(e.collidePlatTop(t,s))return;if(e.collidePlatBottom(t,s+r))return;e.collidePlatLeft(t,i)}},12:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatRight(t,i+r)||e.collidePlatLeft(t,i)},13:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+r)||e.collidePlatRight(t,i+r)},14:function(t,i,s,h,r){e.collidePlatBottom(t,s+r)||e.collidePlatRight(t,i+r)||e.collidePlatLeft(t,i)},15:function(t,i,s,h,r){t.velY>0&&e.collidePlatTop(t,s+r/2)},16:function(t,i,s,h,r){e.collidePlatBottom(t,s+r/2)},17:function(t,i,s,h,r){e.collidePlatLeft(t,i+r/2)},18:function(t,i,s,h,r){e.collidePlatRight(t,i+r/2)},19:function(t,i,s,h,r){e.collidePlatTop(t,s+r/2)||e.collidePlatLeft(t,i)},20:function(t,i,s,h,r){e.collidePlatTop(t,s+r/2)||e.collidePlatRight(t,i+r)},21:function(t,i,s,h,r){e.collidePlatBottom(t,s+r/2)||e.collidePlatLeft(t,i)},22:function(t,i,s,h,r){e.collidePlatBottom(t,s+r/2)||e.collidePlatRight(t,i+r)},23:function(t,i,s,h,r){e.collidePlatLeft(t,i+r/2)||t.x+t.width>i+r/2&&e.collidePlatTop(t,s)},24:function(t,i,s,h,r){e.collidePlatRight(t,i+r/2)||(t.x<i+r/2||t.x+e.width>i)&&e.collidePlatTop(t,s)},25:function(t,i,s,h,r){e.collidePlatLeft(t,i+r/2)||t.x+t.width>i+r/2&&e.collidePlatBottom(t,s+r)},26:function(t,i,s,h,r){e.collidePlatRight(t,i+r/2)||t.x<i+r/2&&e.collidePlatBottom(t,s+r)},27:function(t,i,s,h,r){if(t.x+t.width>i){if(e.collidePlatLeft(t,i+r/2))return;if(e.collidePlatBottom(t,s+r))return;e.collidePlatTop(t,s)}},28:function(t,i,s,h,r){if(t.x<i+r){if(e.collidePlatRight(t,i+r/2))return;if(e.collidePlatBottom(t,s+r))return;e.collidePlatTop(t,s)}},29:function(t,i,s,h,r){if(t.x+t.width>i&&t.y+t.height>s){if(e.collidePlatTop(t,s+r/2))return;e.collidePlatLeft(t,i+r/2)}},30:function(t,i,s,h,r){if(t.x<i+r/2&&t.y+t.height>s+r/2){if(e.collidePlatTop(t,s+r/2))return;e.collidePlatRight(t,i+r/2)}},31:function(t,i,s,h,r){if(t.x>i&&t.y<s+r){if(e.collidePlatBottom(t,s+r/2))return;e.collidePlatLeft(t,i+r/2)}},32:function(t,i,s,h,r){if(t.x<i+r&&t.y<s+r){if(e.collidePlatBottom(t,s+r/2))return;e.collidePlatRight(t,i+r/2)}},33:function(t,i,s,h,r){e.collidePlatTop(t,s+.8*r)},34:function(t,i,s,h,r){e.collidePlatBottom(t,s+r)||e.collideSlopeFortyFiveLeft(t,i+r,s+r)},35:function(t,i,s,h,r){e.collideSlopeFortyFiveRight(t,i,s+r)},36:function(t,i,s,h,r){e.collideSlopeTwentyLeft(t,i+r,s+r)},37:function(t,i,s,h,r){e.collideSlopeTwentyRight(t,i,s+r)},38:function(t,i,s,h,r){e.collideSlopeTwentyLeft(t,i,s+r,30)},39:function(t,i,s,h,r){e.collideSlopeTwentyRight(t,i,s+r,r/2)},40:function(t,i,s,h,r){e.collideSlopeFortyFiveRightBottom(t,i,s+r)},41:function(t,i,s,h,r){e.collideSlopeFortyFiveLeftBottom(t,i+r,s+r)},42:function(t,i,s,h,r){e.collideSlopeTwentyLeftBottom(t,i+r,s+r)},43:function(t,i,s,h,r){e.collideSlopeTwentyRightBottom(t,i,s+r)},44:function(t,i,s,h,r){e.collideSlopeTwentyLeftBottom(t,i+r,s+r,r/2)},45:function(t,i,s,h,r){e.collideSlopeTwentyRightBottom(t,i,s+r,r/2)},46:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collideSlopeFortyFiveLeftBottom(t,i,s+r)},47:function(t,i,s,h,r){t.velY>0&&e.collidePlatTop(t,s)||e.collideSlopeFortyFiveRightBottom(t,i,s+r)},48:function(t,i,s,h,r){e.collidePlatLeft(t,i)||e.collideSlopeFortyFiveLeft(t,i,s+r)},49:function(t,i,s,h,r){e.collidePlatRight(t,i+r)||e.collideSlopeTwentyRight(t,i,s+r,r/2)},50:function(t,i,s,h,r){e.collidePlatLeft(t,i)||e.collideSlopeTwentyLeft(t,i,s+r,r/2)},51:function(t,i,s,h,r){e.collidePlatRight(t,i+r)||e.collideSlopeTwentyRight(t,i,s+r,r/2)},53:function(t,i,s,h,r){e.collidePlatTop(t,s)||e.collidePlatBottom(t,s+r)||e.collidePlatRight(t,i+r)||e.collidePlatLeft(t,i)},54:function(t,i,s,h,r){return e.collidePlatTop(t,s+.9*r)?void 0:void e.collidePlatRight(t,i+r)},58:function(t,i,s,h,r){if(t.x+t.width>i+r/4&&t.x<i+.75*r)e.climbable(t,i,s,r);else if(e.collidePlatTop(t,s))return},63:function(t,i,s,h,r){e.collidePlatLeft(t,i)?t instanceof v&&t.setHit(5):e.collidePlatBottom(t,s+r/6)?t instanceof v&&t.setHit(5):(e.collidePlatRight(t,i+r),t instanceof v&&t.setHit(5))},67:function(t,i,s,h,r){e.collidePlatBottom(t,s+r/6),t instanceof v&&t.setHit(5)}}}var e,i,s;return e=t,(i=[{key:"collidePlayer",value:function(t,e,i){t.x<0?(t.x=.01,t.velX=0):t.x+t.width>e.width&&!i&&(t.x=e.width-t.width,t.velX=0),t.y>e.height&&(t.y=0,t.setHit(50))}},{key:"climbable",value:function(t,e,i){t.canClimb=!0}},{key:"collideProjectile",value:function(t,e){var i=e.hitBox();return t.x<i.right&&t.x+t.width>i.left&&t.y<i.bottom&&t.y+t.height>i.top&&(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(e.damage),e.setHit(),!0)}},{key:"collideEnemy",value:function(t,e){return!e.dying&&!e.dead&&t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&(t instanceof v&&!t.isHit?(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(e.damage),!0):t instanceof Y?(e.setHit(t.damage),e.health<=0&&"down"===t.dir&&(e.points*=2),setTimeout((function(){t.setHit()}),10),!0):void 0)}},{key:"collideSlopeFortyFiveRight",value:function(t,e,i){var s=i-(t.rightSide()-e);if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.velY=0,t.y=i-t.height-.2,t.onGround=!0,void(t.jumpCount=2);t.y=s-t.height-.2}else t.onGround||t.rightSide()>e&&t.bottomSide()>s&&t.oldY+t.height<s&&(t.vlY=0,t.onGround=!0,t.jumpCount=2,t.y=s-t.height-.2);if(t instanceof Y)return t.setHit(),!0}},{key:"collideSlopeFortyFiveRightBottom",value:function(t,e,i){var s=i-(t.rightSide()-e);if(t.rightSide()>e&&t.topSide()<s&&t.oldY>s){if(t instanceof Y)return t.setHit(),!0;t.y=s+.05}}},{key:"collideSlopeFortyFiveLeft",value:function(t,e,i){var s=i-(e-t.leftSide());if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.velY=0,t.y=i-t.height-.02,t.onGround=!0,void(t.jumpCount=2);t.y=s-t.height-.02}else t.onGround||t.leftSide()<e&&t.bottomSide()>s&&t.oldY+t.height<s&&(t.velY=0,t.onGround=!0,t.jumpCount=2,t.y=s-t.height-.02);if(t instanceof Y)return t.setHit(),!0}},{key:"collideSlopeFortyFiveLeftBottom",value:function(t,e,i){var s=i-(e-t.leftSide());if(t.leftSide()<e&&t.topSide()<s&&t.oldY>s){if(t instanceof Y)return t.setHit(),!0;t.y=s+.05}}},{key:"collideSlopeTwentyRight",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=i-(s+(t.rightSide()-e)/2);if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.y=i-t.height-.05,t.onGround=!0,void(t.jumpCount=2);t.y=h-t.height-.05}else t.onGround||t.rightSide()>e&&t.bottomSide()>h&&t.oldY+t.height<h&&(t.velY=0,t.onGround=!0,t.jumpCount=2,t.y=h-t.height-.05);if(t instanceof Y)return t.setHit(),!0}},{key:"collideSlopeTwentyRightBottom",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=i-(s+(t.rightSide()-e)/2);if(t.rightSide()>e&&t.topSide()<h&&t.oldY>h){if(t instanceof Y)return t.setHit(),!0;t.y=h+.05}}},{key:"collideSlopeTwentyLeft",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=i-(s+(e-t.leftSide())/2);if(t instanceof v)if(t.onGround){if(t.bottomSide()>i&&t.oldY+t.height<i)return t.velY=0,t.y=i-t.height-.05,t.onGround=!0,void(t.jumpCount=2);t.y=h-t.height-.05}else t.onGround||t.leftSide()<e&&t.bottomSide()>h&&t.oldY+t.height<h&&(t.velY=0,t.onGround=!0,t.jumpCount=2,t.y=h-t.height-.05);if(t instanceof Y)return t.setHit(),!0}},{key:"collideSlopeTwentyLeftBottom",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=i-(s+(e-t.leftSide())/2);if(t.leftSide()<e&&t.topSide()<h&&t.oldY>h){if(t instanceof Y)return t.setHit(),!0;t.y=h+.05}}},{key:"collidePlatTop",value:function(t,e){return t.bottomSide()>e&&t.oldY+t.height<e?t instanceof Y?(t.setHit(),!0):(t.velY=0,t.y=e-t.height-.1,t instanceof v&&(t.onGround=!0,t.jumpCount=2),!0):(t instanceof v&&(t.onGround=!1),!1)}},{key:"collidePlatBottom",value:function(t,e){return t.topSide()<e&&t.oldY+t.height>e&&(t instanceof Y?(t.setHit(),!0):(t.y=e+.1,t.velY=0,!0))}},{key:"collidePlatRight",value:function(t,e){return t.leftSide()<e&&t.oldX+t.width>e&&(t instanceof Y?(t.setHit(),!0):(t.x=e+.1,!0))}},{key:"collidePlatLeft",value:function(t,e){return t.rightSide()>e&&t.oldX<e&&(t instanceof Y?(t.setHit(),!0):(t.x=e-t.width-.1,!0))}},{key:"collidePlatform",value:function(t,e,i,s,h){s&&this.collisionPlatformKeys[s]&&this.collisionPlatformKeys[s](t,e,i,s,h)}}])&&b(e.prototype,i),s&&b(e,s),t}();function k(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sound=document.createElement("audio"),this.sound.src=e.src,this.sound.id=e.idName,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.setAttribute("muted","false"),this.sound.volume=.2,this.sound.style.display="none",this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.mute=this.mute.bind(this)}var e,i,s;return e=t,s=[{key:"fire",value:function(){return{src:"./assets/Sound/fireSound.mp3",id:"fire"}}},{key:"shock",value:function(){return{src:"./assets/Sound/shock.mp3",id:"shock"}}}],(i=[{key:"play",value:function(){this.sound.play()}},{key:"pause",value:function(){this.sound.pause()}},{key:"mute",value:function(){this.sound.muted=!this.sound.muted}}])&&k(e.prototype,i),s&&k(e,s),t}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,h=!1,r=void 0;try{for(var n,a=t[Symbol.iterator]();!(s=(n=a.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){h=!0,r=t}finally{try{s||null==a.return||a.return()}finally{if(h)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=T(e).call(this,t))||"object"!==P(h)&&"function"!=typeof h?I(s):h).proj=i.loadImage(t.image),i.velX=t.velX,i.velY=t.velY,i.oldX=i.x,i.oldY=i.y,i.dir=t.dir||"right",i.damage=t.damage,i.impacted=!1,i.impactTimeout=t.impactTimeout||0,i.impactSrc=t.impact,i.frameStartX=t.frameStartX,i.frameStartY=t.frameStartY,i.frameWidth=t.frameWidth,i.frameHeight=t.frameHeight,i.frameNum=t.frameNum,i.impactWidth=t.impactWidth,i.impactHeight=t.impactHeight,i.impactFrameWidth=t.impactFrameWidth||i.frameStartX,i.impactFrameHeight=t.impactFrameHeight||i.frameStartY,i.impactStartX=t.impactStartX||145,i.impactStartY=t.impactStartY||150,i.hitTimeout=t.hitTimeout||2e3,i.tileSize=60,i.collider=new w,i.isHit=!1,i.launchSound=new S(S.fire()),i.loadImage=i.loadImage.bind(I(i)),i.getTopLeftPos=i.getTopLeftPos.bind(I(i)),i.getTopRightPos=i.getTopRightPos.bind(I(i)),i.getBottomLeftPos=i.getBottomLeftPos.bind(I(i)),i.getBottomRightPos=i.getBottomRightPos.bind(I(i)),i.setHit=i.setHit.bind(I(i)),i.timeOutHit=i.timeOutHit.bind(I(i)),i.updateProjectile=i.updateProjectile.bind(I(i)),i.drawProjectile=i.drawProjectile.bind(I(i)),i.drawImpact=i.drawImpact.bind(I(i)),i.timeOutHit(),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,t),i=e,h=[{key:"fireball",value:function(t,e,i,s){return{pos:t,width:35,height:12,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:277,frameWidth:65,frameHeight:18,frameNum:8,image:"./assets/fireball.png",impact:"./assets/burst.png",impactWidth:60,impactHeight:60,impactStartX:145,impactStartY:150,impactFrameWidth:90,impactFrameHeight:90,damage:25}}},{key:"fireballVert",value:function(t,e,i,s){return{pos:t,width:12,height:35,velX:e,velY:i,dir:s,impact:"./assets/burst.png",frameStartX:10,frameStartY:400,frameWidth:22,frameHeight:35,frameNum:8,image:"./assets/fireball.png",impactFrameWidth:90,impactFrameHeight:90,impactWidth:60,impactHeight:60,impactStartX:145,impactStartY:150,damage:25}}},{key:"blueFireball",value:function(t,e,i,s){return{pos:t,width:70,height:36,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:277,frameWidth:65,frameHeight:18,frameNum:8,image:"./assets/blue_fireball.png",impact:"./assets/blue_burst.png",impactWidth:60,impactHeight:60,impactStartX:145,impactStartY:150,impactFrameWidth:90,impactFrameHeight:90,damage:50}}},{key:"blueFireballVert",value:function(t,e,i,s){return{pos:t,width:36,height:70,velX:e,velY:i,dir:s,impact:"./assets/blue_burst.png",frameStartX:10,frameStartY:400,frameWidth:22,frameHeight:35,frameNum:8,image:"./assets/blue_fireball.png",impactFrameWidth:90,impactFrameHeight:90,impactWidth:60,impactHeight:60,impactStartX:145,impactStartY:150,damage:50}}},{key:"helibullet",value:function(t,e,i,s){return{pos:t,width:25,height:25,velX:e,velY:i,dir:s,frameStartX:420,frameStartY:330,frameWidth:15,frameHeight:15,frameNum:1,image:"./assets/footEn.png",impact:"./assets/burst.png",damage:10}}},{key:"electricBall",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return arguments.length>3&&void 0!==arguments[3]&&arguments[3],{pos:t,width:78.5,height:86,velX:e,velY:i,dir:"up",frameStartX:0,frameStartY:435,frameWidth:180,frameHeight:145,frameNum:4,image:"./assets/electric_ball.png",impact:"./assets/electric_ball.png",impactTimeout:6e3,impactWidth:180,impactHeight:145,impactFrameWidth:180,impactFrameHeight:145,hitTimeout:6e3,damage:20}}}],(s=[{key:"hitBox",value:function(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}},{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"setHit",value:function(t){var e=this;this.proj.src=this.impactSrc,this.impacted=!0,this.velX=0,this.velY=0,this.hitTimeout=setTimeout((function(){e.isHit=!0}),100)}},{key:"timeOutHit",value:function(){var t=this;this.hitTimeout=setTimeout((function(){t.isHit=!0}),2e3)}},{key:"platformCheck",value:function(){var t,e,i,s,h;if("left"===this.dir){var r=x(this.getTopLeftPos(),2);h=r[0],e=r[1],t=this.physicalMap[15*e+h],this.collider.collidePlatform(this,h*this.tileSize,e*this.tileSize,t);var n=x(this.getBottomLeftPos(),2);h=n[0],i=n[1],t=this.physicalMap[15*i+h],this.collider.collidePlatform(this,h*this.tileSize,i*this.tileSize,t)}if("right"===this.dir){var a=x(this.getTopRightPos(),2);s=a[0],e=a[1],t=this.physicalMap[15*e+s],this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t);var o=x(this.getBottomRightPos(),2);s=o[0],i=o[1],t=this.physicalMap[15*i+s],this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t)}}},{key:"updateProjectile",value:function(){this.oldX=this.x,this.oldY=this.y,this.x+=this.velX,this.y+=this.velY}},{key:"drawProjectile",value:function(t,e){this.hit||(this.impacted?this.drawImpact(t,e):(this.updateProjectile(),"up"===this.dir?(t.scale(1,-1),t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,-this.y+this.height,this.width,this.height),t.scale(1,-1)):"down"===this.dir?t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):"right"===this.dir?t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.frameWidth,this.y,this.width,this.height),t.scale(-1,1))))}},{key:"drawImpact",value:function(t,e){"up"===this.dir?t.drawImage(this.proj,this.impactStartX,this.impactStartY,this.impactFrameWidth,this.impactFrameHeight,this.x-this.impactFrameWidth/3,this.y-this.impactFrameHeight/2,this.impactWidth,this.impactHeight):"down"===this.dir?t.drawImage(this.proj,this.impactStartX,this.impactStartY,this.impactFrameWidth,this.impactFrameHeight,this.x-this.impactFrameWidth/2,this.y+this.height-this.impactFrameHeight/2,this.impactWidth,this.impactHeight):(this.dir,t.drawImage(this.proj,this.impactStartX,this.impactStartY,this.impactFrameWidth,this.impactFrameHeight,this.x-this.width/3,this.y-this.impactFrameHeight/3,this.impactWidth,this.impactHeight))}}])&&j(i.prototype,s),h&&j(i,h),e}(a);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=L(e).call(this,t))||"object"!==O(h)&&"function"!=typeof h?H(s):h).velX=t.velX?t.velX:0,i.velY=t.velY?t.velY:0,i.enemy=i.loadImage(t.image),i.frameNum=t.frameNum,i.dir=t.dir||"right",i.frameStartX=68,i.frameStartY=290,i.frameWidth=116,i.frameHeight=80,i.projectiles={},i.dying=!1,i.dead=!1,i.health=t.health,i.damage=t.damage,i.isHit=!1,i.setHit=i.setHit.bind(H(i)),i.setDying=i.setDying.bind(H(i)),i.getMidX=i.getMidX.bind(H(i)),i.getMidY=i.getMidY.bind(H(i)),i.loadImage=i.loadImage.bind(H(i)),i.drawEnemy=i.drawEnemy.bind(H(i)),i.shootProj=i.shootProj.bind(H(i)),i.callAttack=i.callAttack.bind(H(i)),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),i=e,h=[{key:"helicopter",value:function(t){return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,velX:3,dir:"right",health:100,damage:10}}}],(s=[{key:"getMidX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x;return t+this.width/2}},{key:"getMidY",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.y;return t+this.height/2}},{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),500),this.health-=e)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new Y(Y.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new Y(Y.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),200)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}},{key:"hitBox",value:function(t,e){if(t.y<e.y+e.height&&t.y>e.y+e.height/2){if("right"===e.dir&&t.x<e.x+e.width&&t.x+t.width>e.x+e.width/3||"left"===e.dir&&t.x<e.x+e.width*(2/3)&&t.x+t.width>e.x)return!0}else if((t.y<e.height/2&&t.y>e.y||t.y+t.height>e.y)&&t.x<e.x+e.width&&t.x+t.width>e.x)return!0;return!1}}])&&X(i.prototype,s),h&&X(i,h),e}(a);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=_(e).call(this,t))||"object"!==F(h)&&"function"!=typeof h?B(s):h).velX=t.velX||3,i.velY=0,i.image=t.image||"./assets/footEn.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||3,i.frameStartX=t.frameStartX||68,i.frameStartY=t.frameStartY||290,i.frameWidth=t.frameWidth||116,i.frameHeight=t.frameHeight||80,i.projectiles={},i.bounds=t.bounds,i.points=6*t.multiplier,i.loadImage=i.loadImage.bind(B(i)),i.drawEnemy=i.drawEnemy.bind(B(i)),i.shootProj=i.shootProj.bind(B(i)),i.callAttack=i.callAttack.bind(B(i)),i.callAttack(),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),i=e,h=[{key:"hel1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3?arguments[3]:void 0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,health:100,velX:"left"===i?-3:3,velY:s||0,dir:i,damage:20,bounds:e,multiplier:h}}},{key:"hel2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:150,height:85,health:100,velX:"left"===i?-3:3,dir:i,damage:10,bounds:e,multiplier:s}}}],(s=[{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new Y(Y.helibullet([this.leftSide()+.15*this.width,this.bottomSide()-.184*this.height],-9,7,"left")):this.projectiles[t]=new Y(Y.helibullet([this.rightSide()-.2*this.width,this.bottomSide()-.184*this.height],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),500)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,this.bounds?(this.x+this.width/2<this.bounds[0]||this.x+this.width/2>this.bounds[1])&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right"):(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}}])&&E(i.prototype,s),h&&E(i,h),e}(R);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var V=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=G(e).call(this,t))||"object"!==A(h)&&"function"!=typeof h?D(s):h).velX=t.velX||0,i.velY=t.velY||1,i.image=t.image,i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||4,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||92.5,i.frameHeight=t.frameHeight||102,i.frameCount=0,i.bounds=t.bounds,i.damage=t.damage,i.points=5*t.multiplier,i.projectiles={},i.drawEnemy=i.drawEnemy.bind(D(i)),i.shootProj=i.shootProj.bind(D(i)),i.callAttack=i.callAttack.bind(D(i)),i.startFrameCount=i.startFrameCount.bind(D(i)),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,t),i=e,h=[{key:"spider1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:93,height:102,health:110,velX:0,velY:3,damage:25,bounds:e,multiplier:i}}},{key:"spider2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.6;return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:60.5,height:76,health:70,velX:0,velY:1.5,damage:30,bounds:e,multiplier:i}}},{key:"spider3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2;return{name:"spider",image:"./assets/spider.png",frameNum:15,pos:t,width:46.5,height:56,health:70,velX:0,velY:2.5,bounds:e,damage:50,multiplier:i}}}],(s=[{key:"startFrameCount",value:function(){var t=this;this.enemyInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"drawEnemy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.frameCount;if(this.setDying(),t.beginPath(),t.moveTo(this.getMidX(this.pos[0]),this.pos[1]),t.lineTo(this.getMidX(this.pos[0]),this.getMidY(this.y)),t.lineWidth=2,t.strokeStyle="rgba(255, 255, 255, 0.5)",t.stroke(),t.closePath(),!this.isHit&&!this.dying||e%3!=0){var i=Math.floor(e/2.5)%this.frameNum;t.scale(1,-1),t.drawImage(this.enemy,i%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,-this.y-this.height,this.width,this.height),t.scale(1,-1)}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t){this.oldY=this.y,this.y+=this.velY,this.bounds?(this.y+this.height<this.bounds[0]||this.y+this.height>this.bounds[1])&&(this.velY*=-1):(this.y+this.height<0||this.y+this.height>t.height)&&(this.velY*=-1)}}])&&N(i.prototype,s),h&&N(i,h),e}(R);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=q(e).call(this,t))||"object"!==U(h)&&"function"!=typeof h?Q(s):h).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=20,i.points=10*t.multiplier,i.drawEnemy=i.drawEnemy.bind(Q(i)),i.shootProj=i.shootProj.bind(Q(i)),i.checkPlayerPos=i.checkPlayerPos.bind(Q(i)),i.callAttack=i.callAttack.bind(Q(i)),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),i=e,h=[{key:"vine1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.6;return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:65,height:95,health:75,velX:1,dir:i,player:e,multiplier:s}}},{key:"vine2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:100,height:145,health:120,velX:1,dir:i,player:e,multiplier:s}}},{key:"vine3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:35,height:45,health:50,velX:1,dir:i,player:e,multiplier:s}}}],(s=[{key:"checkPlayerPos",value:function(t,e,i){var s=this;e>this.y?this.velY=1:this.velY=-1,e>this.y&&e<this.y+this.height&&(t>this.x||t<this.x)?this.velX="left"===this.dir?-5:5:this.velX="left"===this.dir?-1:1,t>this.x&&"left"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=1,s.dir="right"}),1e3):t<this.x&&"right"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=-1,s.dir="left"}),1e3):(t>this.x&&"right"===this.dir||t<this.x&&"left"===this.dir)&&clearTimeout(this.playerCheckTimeout)}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2)}},{key:"drawEnemy",value:function(t,e){this.setDying(),(!this.isHit&&!this.dying||e%3!=0)&&("right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(e/1.5)%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new Y(Y.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new Y(Y.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t,e){this.oldY=this.y,this.oldX=this.x,this.x+=this.velX,this.y+=this.velY,this.checkPlayerPos(e.x,e.y)}}])&&J(i.prototype,s),h&&J(i,h),e}(R);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,h=!1,r=void 0;try{for(var n,a=t[Symbol.iterator]();!(s=(n=a.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){h=!0,r=t}finally{try{s||null==a.return||a.return()}finally{if(h)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function it(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nt=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=st(e).call(this,t))||"object"!==tt(h)&&"function"!=typeof h?ht(s):h).proj=i.loadImage(),i.width=90,i.height=72.5,i.velX=0,i.velY=1,i.oldX=i.x,i.oldY=i.y,i.damage=t.damage,i.impacted=!1,i.impactTimeout=6e3,i.impactSrc="./assets/electric_ball.png",i.frameStartX=0,i.frameStartY=435,i.frameWidth=180,i.frameHeight=145,i.frameNum=4,i.impactWidth=180,i.impactHeight=145,i.impactStartX=145,i.impactStartY=150,i.hitTimeout=6e3,i.tileSize=60,i.collider=new w,i.isHit=!1,i.loadImage=i.loadImage.bind(ht(i)),i.getTopLeftPos=i.getTopLeftPos.bind(ht(i)),i.getTopRightPos=i.getTopRightPos.bind(ht(i)),i.getBottomLeftPos=i.getBottomLeftPos.bind(ht(i)),i.getBottomRightPos=i.getBottomRightPos.bind(ht(i)),i.setHit=i.setHit.bind(ht(i)),i.timeOutHit=i.timeOutHit.bind(ht(i)),i.updateProjectile=i.updateProjectile.bind(ht(i)),i.drawProjectile=i.drawProjectile.bind(ht(i)),i.drawImpact=i.drawImpact.bind(ht(i)),i.hitBox=i.hitBox.bind(ht(i)),i.impactSound=new S(S.shock()),i.timeOutHit(),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,t),i=e,h=[{key:"electricBall",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return arguments.length>3&&void 0!==arguments[3]&&arguments[3],{pos:t,width:78.5,height:86,velX:e,velY:i,dir:"up",frameStartX:0,frameStartY:435,frameWidth:180,frameHeight:145,frameNum:4,image:"./assets/electric_ball.png",impact:"./assets/electric_ball.png",impactTimeout:6e3,impactWidth:180,impactHeight:145,impactFrameWidth:180,impactFrameHeight:145,hitTimeout:6e3,damage:20}}}],(s=[{key:"hitBox",value:function(){return{left:this.x+this.width/5,right:this.x+.8*this.width,top:this.y+this.height/5,bottom:this.y+.8*this.height}}},{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/electric_ball.png",t}},{key:"getTopLeftPos",value:function(){return[Math.floor((this.leftSide()+this.width/5)/this.tileSize),Math.floor((this.topSide()+this.height/5)/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor((this.rightSide()-this.width/5)/this.tileSize),Math.floor((this.topSide()+this.height/5)/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor((this.leftSide()+this.width/5)/this.tileSize),Math.floor((this.bottomSide()-this.height/5)/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor((this.bottomSide()-this.height/5)/this.tileSize)]}},{key:"setHit",value:function(){var t=this;this.impacted=!0,this.impactSound.play(),this.proj.src=this.impactSrc,this.width*=1.7,this.height*=1.7,this.velX=0,this.velY=0,setTimeout((function(){t.impactSound.pause(),t.isHit=!0}),3e3)}},{key:"timeOutHit",value:function(){var t=this;this.hitTimeout=setTimeout((function(){t.isHit=!0}),7e3)}},{key:"platformCheck",value:function(){var t,e,i,s,h;if("left"===this.dir){var r=et(this.getTopLeftPos(),2);h=r[0],e=r[1],t=this.physicalMap[15*e+h],this.collider.collidePlatform(this,h*this.tileSize,e*this.tileSize,t);var n=et(this.getBottomLeftPos(),2);h=n[0],i=n[1],t=this.physicalMap[15*i+h],this.collider.collidePlatform(this,h*this.tileSize,i*this.tileSize,t)}if("right"===this.dir){var a=et(this.getTopRightPos(),2);s=a[0],e=a[1],t=this.physicalMap[15*e+s],this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t);var o=et(this.getBottomRightPos(),2);s=o[0],i=o[1],t=this.physicalMap[15*i+s],this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t)}}},{key:"updateProjectile",value:function(){this.oldX=this.x,this.oldY=this.y,this.x+=this.velX,this.y+=this.velY}},{key:"drawProjectile",value:function(t,e){this.isHit||(this.impacted?this.drawImpact(t,e):(this.updateProjectile(),t.drawImage(this.proj,e%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)))}},{key:"drawImpact",value:function(t,e){t.drawImage(this.proj,e%this.frameNum*this.frameWidth,this.frameStartY,180,145,this.x-45,this.y-36.25,180,145)}}])&&it(i.prototype,s),h&&it(i,h),e}(Y);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dt=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=lt(e).call(this,t))||"object"!==at(h)&&"function"!=typeof h?ct(s):h).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/jellyfish.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=4,i.frameStartY=130,i.frameWidth=t.frameWidth||58,i.frameHeight=t.frameHeight||64,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=t.damage,i.points=10*t.multiplier,i.drawEnemy=i.drawEnemy.bind(ct(i)),i.shootProj=i.shootProj.bind(ct(i)),i.checkPlayerPos=i.checkPlayerPos.bind(ct(i)),i.setAttackInterval=i.setAttackInterval.bind(ct(i)),i.setAttackInterval(),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,t),i=e,h=[{key:"jell1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return arguments.length>3&&void 0!==arguments[3]&&arguments[3],{name:"Jellyfish",image:"./assets/jellyfish.png",frameNum:8,pos:t,width:90,height:100,health:130,velX:1,dir:i,player:e,multiplier:1}}},{key:"jell2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return arguments.length>3&&void 0!==arguments[3]&&arguments[3],{name:"Jellyfish",image:"./assets/jellyfish.png",frameNum:8,pos:t,width:60,height:66,health:90,velX:1,dir:i,player:e,multiplier:.5}}},{key:"jell3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return arguments.length>3&&void 0!==arguments[3]&&arguments[3],{name:"Jellyfish",image:"./assets/jellyfish.png",frameNum:8,pos:t,width:35,height:45,health:50,velX:1,dir:i,player:e,multiplier:.5}}}],(s=[{key:"setAttackInterval",value:function(){var t=this;setTimeout((function(){t.attackInterval=setInterval((function(){t.shootProj()}),4e3)}),2e3)}},{key:"checkPlayerPos",value:function(t,e,i){var s=this;e>this.y?this.velY=2:this.velY=-2,t>this.x&&"left"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=2,s.dir="right"}),1e3):t<this.x&&"right"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=-2,s.dir="left"}),1e3):(t>this.x&&"right"===this.dir||t<this.x&&"left"===this.dir)&&clearTimeout(this.playerCheckTimeout)}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2e3)}},{key:"drawEnemy",value:function(t,e){if(this.setDying(),!this.isHit&&!this.dying||e%3!=0){var i=Math.floor(e/2.5)%this.frameNum;"left"===this.dir?t.drawImage(this.enemy,i*this.frameWidth+(this.frameStartX*i+2*i),this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,i*this.frameWidth+(this.frameStartX*i+2*i),this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1))}}},{key:"shootProj",value:function(){if(10!==Object.keys(this.projectiles).length){for(var t,e=1;e<=10;e++)if(!this.projectiles[e]){t=e;break}this.projectiles[t]=new nt({pos:[this.leftSide()+this.width/2,this.bottomSide()-this.height/2]})}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t,e){this.oldY=this.y,this.oldX=this.x,this.x+=this.velX,this.y+=this.velY,this.checkPlayerPos(e.x,e.y-2*e.height)}}])&&ot(i.prototype,s),h&&ot(i,h),e}(R);function ft(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boss=e.boss,this.vine=this.loadImage(),this.attacking=!1,this.charging=!1,this.frameNum=7,this.velX=0,this.velY=e.velY,this.x=e.pos[0],this.y=e.pos[1],this.startX=this.x,this.boundsY=e.boundsY,this.damage=e.damage||10,this.frameCountOffset=e.frameCountOffset,this.attack=this.attack.bind(this),this.loadImage=this.loadImage.bind(this),this.backUp=this.backUp.bind(this),this.charge=this.charge.bind(this),this.drawVines=this.drawVines.bind(this),this.playerCheck=this.playerCheck.bind(this),this.move=this.move.bind(this)}var e,i,s;return e=t,s=[{key:"vines1",value:function(t,e){return{boss:t,pos:e,velY:Math.floor(10*Math.random())<=5?-1:1,boundsY:[e[1]-75,e[1]+75],frameCountOffset:Math.floor(7*Math.random())}}}],(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/vines.png",t}},{key:"attack",value:function(t){var e=this;this.attacking=!0,this.chargeTimeout=setTimeout((function(){e.charge()}),t)}},{key:"backUp",value:function(){var t=this;this.vineTimeout=setTimeout((function(){t.charging=!1,t.velX=10}),300)}},{key:"charge",value:function(){this.charging=!0,this.velX=-20}},{key:"drawVines",value:function(t,e){if(!this.boss.dying||e%3!=0){var i=this.charging?0:this.attacking?(e+this.frameCountOffset)%this.frameNum:(Math.floor(e/2.5)+this.frameCountOffset)%this.frameNum,s=this.attacking?1e3:400;"left"===this.boss.dir?t.drawImage(this.vine,2,95*i,s,95,this.x,this.y,s,60):(t.scale(-1,1),t.drawImage(this.vine,2,95*i,s,95,-this.x-s,this.y,s,60),t.scale(-1,1))}}},{key:"playerCheck",value:function(t){this.boss.dying||t.x>this.x&&t.y+t.height>this.y+10&&t.y<this.y+50&&t.setHit(this.damage)}},{key:"move",value:function(t,e,i){this.oldX=this.x,this.x+=this.velX,this.attacking||(this.y+=this.velY),this.playerCheck(i),this.x<-20?(this.x=-20,this.backUp()):this.x>this.startX&&(this.velX=0,this.attacking=!1,this.x=this.startX),(this.y<this.boundsY[0]||this.y>this.boundsY[1])&&(this.velY*=-1),this.drawVines(t,e)}}])&&ft(e.prototype,i),s&&ft(e,s),t}();function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t){var i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(h=gt(e).call(this,t))||"object"!==pt(h)&&"function"!=typeof h?vt(s):h).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.vineNum=5,i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=50,i.attacking=!1,i.charging=!1,i.frameCount=0,i.points=50,i.vines=[new mt(mt.vines1(vt(i),[600,60])),new mt(mt.vines1(vt(i),[600,150])),new mt(mt.vines1(vt(i),[600,500])),new mt(mt.vines1(vt(i),[700,100])),new mt(mt.vines1(vt(i),[600,300])),new mt(mt.vines1(vt(i),[700,400]))],i.drawEnemy=i.drawEnemy.bind(vt(i)),i.shootProj=i.shootProj.bind(vt(i)),i.callAttack=i.callAttack.bind(vt(i)),i.charge=i.charge.bind(vt(i)),i.startFrameCount=i.startFrameCount.bind(vt(i)),i.shuffleVines=i.shuffleVines.bind(vt(i)),i.renderVines=i.renderVines.bind(vt(i)),i.attackVines=i.attackVines.bind(vt(i)),i.startAttack=i.startAttack.bind(vt(i)),i.startFrameCount(),i.startAttack(),i}var i,s,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(e,t),i=e,h=[{key:"boss1",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:260,height:370,health:1200,velX:0,dir:"left",player:e}}}],(s=[{key:"startFrameCount",value:function(){var t=this;this.bossInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"startAttack",value:function(){var t=this;this.attackTimeout=setTimeout((function(){t.attack()}),1e3),this.vineInterval=setInterval((function(){t.attackVines()}),1e4)}},{key:"spawnEnemies",value:function(){}},{key:"attack",value:function(){var t=this;this.attacking=!0,this.chargeTimeout=setTimeout((function(){t.charge()}),2500)}},{key:"charge",value:function(){this.charging=!0,this.velX=-10}},{key:"shuffleVines",value:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),s=[t[i],t[e]];t[e]=s[0],t[i]=s[1]}return t}},{key:"renderVines",value:function(t,e){var i=this;this.vines.forEach((function(s,h){s.move(t,i.frameCount,e)}))}},{key:"attackVines",value:function(){var t=this;this.vines.forEach((function(t,e){t.attack(1500+300*e)})),setTimeout((function(){t.vines=t.shuffleVines(t.vines)}),5e3)}},{key:"drawEnemy",value:function(t,e){if(this.setDying(),!this.isHit&&!this.dying||e%3!=0){var i=this.attacking&&(this.frameCount%3==0||this.frameCount%3==1)||this.charging?87:this.frameStartY;"right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(this.frameCount/1.5)%this.frameNum*this.frameWidth,i,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,this.frameCount%this.frameNum*this.frameWidth+this.frameStartX,i,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1))}}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new Y(Y.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new Y(Y.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.vines.forEach((function(t){clearTimeout(t.chargeTimeout),clearTimeout(t.vineTimeout)})),this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),clearInterval(this.vineInterval),setTimeout((function(){t.dead=!0,clearInterval(t.startFrameCount)}),3e3))}},{key:"backUp",value:function(){this.charging=!1,this.velX=2}},{key:"move",value:function(t,e,i){var s=this;this.oldX=this.x,this.x+=this.velX,this.x<160?(this.x=160,this.backUp()):this.x>650&&(this.velX=0,this.attacking=!1,this.x=650,this.attackTimeout=setTimeout((function(){s.attack()}),7e3)),this.renderVines(i,e)}}])&&yt(i.prototype,s),h&&yt(i,h),e}(R);function kt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var St=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e.ctx,this.player=e.player,this.mapKeys=e.mapKeys,this.screen=Object.keys(this.mapKeys)[0],this.renderMap=e.renderMap||this.mapKeys[this.screen].renderMap,this.physicalMap=e.physicalMap||this.mapKeys[this.screen].physicalMap,this.cols=15,this.rows=10,this.tileSize=e.tileSize,this.tileMap=this.loadImage(),this.mapTileSize=this.tileMap.width/this.rows,this.enemies=this.mapKeys[this.screen].enemies(),this.enemyCount=1,this.theme=new l({src:this.mapKeys[this.screen].theme}),this.levelLayers=this.loadImages(this.mapKeys[this.screen].levelLayers),this.spawnTier=this.mapKeys[this.screen].spawnTier||null,this.rushLevel=0,this.spawnTierGroup=2,this.rushInterval="",this.enemyRushSpawn=this.enemyRushSpawn.bind(this),this.enemyRushInterval=this.enemyRushInterval.bind(this),this.getTile=this.getTile.bind(this),this.getLeft=this.getLeft.bind(this),this.getRight=this.getRight.bind(this),this.getTop=this.getTop.bind(this),this.getBottom=this.getBottom.bind(this),this.drawLevel=this.drawLevel.bind(this),this.loadImage=this.loadImage.bind(this),this.loadLevel=this.loadLevel.bind(this),this.enemiesInterval=this.enemiesInterval.bind(this),this.spawnEnemies=this.spawnEnemies.bind(this),this.enemyRush=this.enemyRush.bind(this),this.loadImages=this.loadImages.bind(this),this.renderBackground=this.renderBackground.bind(this),this.renderMid=this.renderMid.bind(this),this.renderFront=this.renderFront.bind(this),this.enemiesInterval()}var e,i,s;return e=t,s=[{key:"level2",value:function(){var t=this;return{8:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,0,0,0,29,29,29,0,0,0,0,0,0,3,1,2,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1],enemies:function(){return{1:new V(V.spider1([600,0],[20,359])),2:new V(V.spider1([420,0],[20,179])),3:new V(V.spider1([240,0],[20,359])),4:new V(V.spider1([780,0],[20,479])),5:new V(V.spider1([60,0],[20,479]))}},spawnTier:{1:{0:function(){return new V(V.spider1([600,0],[20,359]))},1:function(){return new V(V.spider1([420,0],[20,179]))},2:function(){return new V(V.spider1([240,0],[20,359]))}},2:{0:function(){return new W(W.hel2([800,50],[-50,950],"left"))},1:function(){return new W(W.hel2([0,50],[-50,950],"right"))},2:function(){return new W(W.hel1([800,15],[-50,950],"left"))},3:function(){return new W(W.hel1([0,15],[-50,950],"right"))}},3:{0:function(){var e=Math.floor(600*Math.random()),i=e%2==0?1:839;return new dt(dt.jell2([i,e],t.player))},1:function(){var e=Math.floor(600*Math.random()),i=e%2==0?1:809;return new dt(dt.jell1([i,e],t.player))}},4:{0:function(){var e=Math.floor(600*Math.random()),i=e%2==0?1:890;return new $($.vine3([i,e],t.player))},1:function(){var e=Math.floor(600*Math.random()),i=e%2==0?1:890;return new $($.vine1([i,e],t.player))},2:function(){var e=Math.floor(600*Math.random()),i=e%2==0?1:890;return new $($.vine2([i,e],t.player))}}},theme:"./assets/Sound/dk3_boss_boogie.mp3",levelLayers:{background:"./assets/Level1/lv1_back.png"}}}}},{key:"level1",value:function(){var t=this;return{1:{renderMap:[],physicalMap:[0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,3,3,3,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,2,2,2,24,0,0,0,1,2,34,0,0,0,0,17,0,0,0,18,0,0,0,0,0,0,34,0,0,0,17,0,0,0,18,0,0,0,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1],enemies:function(){return{}},theme:"./assets/Sound/ff9_stirring_forest.mp3",levelLayers:{background:"./assets/Level1/lv1_back.png",mid:"./assets/Level1/lv1_mid.png",front:"./assets/Level1/lv1_front.png"}},2:{renderMap:[],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,12,39,0,0,0,0,17,0,0,0,0,0,0,0,0,4,18,0,0,0,0,17,0,0,0,19,20,0,0,0,4,18,30,0,0,0,17,0,0,0,4,5,0,0,37,4,40,0,0,0,0,31,16,0,0,9,8,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,31,15,15,15,0,0,0,0,0,35,0,5,0,0,0,0,4,0,0,1,1,1,1,2,0,0,5,0,0,0,0,4,0,0],levelLayers:{background:"./assets/Level1/lvl2_back.png",mid:"./assets/Level1/lvl2_mid.png",front:"./assets/Level1/lvl2_front.png"},enemies:function(){return{1:new W(W.hel2([10,10],[0,700])),3:new W(W.hel2([10,140],[0,335],"left")),4:new V(V.spider1([700,0],[0,380])),5:new V(V.spider2([600,0],[20,440])),6:new V(V.spider3([150,0],[20,250]))}}},3:{renderMap:[0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,16,32,0,0,0,16,0,0,0,16,0,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,4,50,5,5,29,29,29,30,0,0,0,0,0,0,0,4,5,5,5,0,0,40,0,0,0,0,0,0,0,0,55,5,40,5,0,5,0,0,0,0,0,0,0,0,0,0,5,5,5],physicalMap:[0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,0,0,0,0,0,0,0,0,0,0,18,58,0,0,0,0,0,0,0,0,0,0,37,15,0,18,0,0,0,0,47,34,0,0,0,37,39,0,0,16,8,0,0,0,0,0,0,0,0,0,4,1,1,1,0,0,0,0,0,0,33,33,33,0,0,44,16,42,3,15,36,0,0,0,0,16,16,45,0,0,0,0,0,0,5,0,2,24,0,0,0,0,0,0,0,0,0,0,0,5,5,0,0,15,15,15,15,15,20,0,33,33,33,33],enemies:function(){return{3:new dt(dt.jell2([500,550])),4:new dt(dt.jell1([700,50])),5:new $($.vine1([500,100],t.player)),6:new $($.vine3([800,20],t.player))}},levelLayers:{background:"./assets/Level1/lvl3_back.png",mid:"./assets/Level1/lvl3_mid.png",front:"./assets/Level1/lvl3_front.png"}},4:{renderMap:[],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,7,0,0,0,37,39,2,58,2,2,2,38,36,0,2,5,15,15,39,0,0,0,58,0,0,0,0,0,0,0,0,0,0,5,0,0,0,58,0,0,0,0,0,3,3,3,3,0,40,0,0,0,58,0,0,0,0,0,0,0,0,5,5,0,0,0,0,58,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,33,33,33,33,33,33,6,2,2,2,2,2,34,0,0],enemies:function(){return{1:new W(W.hel2([500,0])),4:new $($.vine3([500,100],t.player)),5:new $($.vine3([300,450],t.player)),6:new $($.vine3([850,500],t.player)),7:new $($.vine1([800,-20],t.player))}},levelLayers:{background:"./assets/Level1/lvl4_back.png",mid:"./assets/Level1/lvl4_mid.png",front:"./assets/Level1/lvl4_front.png"}},5:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,29,29,29,29,0,29,29,29,29,29,29,29,1,1,1,1,1,1,2,0,3,1,1,1,1,1,1,5,9,0,0,0,0,0,0,0,0,0,0,13,5,5,28,0,0,0,0,0,0,0,0,0,0,0,0,4,28,1,1,2,0,0,0,0,0,0,0,0,3,1,1,1,16,16,16,0,0,0,0,0,0,0,0,5,5,5,5,0,0,0,0,0,29,29,29,29,29,3,1,1,1,1,0,0,0,0,0,3,1,1,1,2,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,1,1,1,1,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:function(){return{1:new $($.vine3([10,530],t.player)),2:new $($.vine3([830,0],t.player)),3:new $($.vine2([600,600],t.player)),4:new $($.vine1([500,100],t.player)),5:new $($.vine2([200,450],t.player)),6:new $($.vine2([850,500],t.player)),7:new $($.vine1([800,-20],t.player))}},levelLayers:{background:"./assets/Level1/lvl3_back.png"}},6:{renderMap:[0,0,0,0,0,0,0,13,5,5,5,49,5,5,5,0,0,0,0,0,0,0,0,16,16,16,16,16,16,16,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,28,9,0,0,0,0,0,0,0,0,0,0,0,0,0,5,29,29,29,0,29,29,0,47,47,47,47,47,47,47,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:function(){return{1:new wt(wt.boss1([650,100],t.player))}},theme:"./assets/Sound/dk3_boss_boogie.mp3",levelLayers:{background:"./assets/Level1/lv1_back.png"}},8:{renderMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,29,29,0,0,0,29,29,29,0,0,0,0,0,0,3,1,2,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1],enemies:function(){return{1:new V(V.spider2([600,0],[20,440]))}},theme:"./assets/Sound/dk3_boss_boogie.mp3",levelLayers:{background:"./assets/Level1/lv1_back.png"}}}}}],(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"loadImages",value:function(t){var e=new Image;e.src=t.background;var i=t.mid?new Image:null;i&&(i.src=t.mid);var s=t.front?new Image:null;return s&&(s.src=t.front),{background:e,mid:i,front:s}}},{key:"renderBackground",value:function(t,e){t.drawImage(this.levelLayers.background,0,0,900,600,0,0,e.width,e.height)}},{key:"renderMid",value:function(t,e){this.levelLayers.mid&&t.drawImage(this.levelLayers.mid,0,0,900,600,0,0,e.width,e.height)}},{key:"renderFront",value:function(t,e){this.levelLayers.front&&t.drawImage(this.levelLayers.front,0,0,900,600,0,0,e.width,e.height)}},{key:"getTile",value:function(t,e){return this.renderMap[e*this.cols+t]}},{key:"getLeft",value:function(t,e){return Math.floor(t*this.tileSize)}},{key:"getRight",value:function(t,e){return Math.floor(t*this.tileSize+this.tileSize)}},{key:"getTop",value:function(t,e){return Math.floor(e*this.tileSize-this.tileSize)}},{key:"getBottom",value:function(t,e){return Math.floor(e*this.tileSize)}},{key:"enemiesInterval",value:function(){var t=this;parseInt(this.screen)<6||8===parseInt(this.screen)||(this.spawnInterval=setInterval((function(){t.enemies[1]||clearInterval(t.spawnInterval),t.spawnEnemies()}),7e3))}},{key:"spawnEnemies",value:function(){if(!(Object.keys(this.enemies).length>=8)){this.enemyCount++;var t=this.enemyCount,e=600*Math.random();this.enemies[t]=new $($.vine2([890,e],this.player,"left"))}}},{key:"enemyRush",value:function(){if(!(Object.keys(this.enemies).length>=6)){this.enemyCount++;var t=this.enemyCount+Math.floor(100*Math.random()),e=600*Math.random(),i=Object.keys(this.enemies).length%2==0?10:890;this.enemies[t]=new $($.vine2([i,e],this.player,"left"))}}},{key:"enemyRushSpawn",value:function(t){if(!(Object.keys(this.enemies).length>=t)){var e=this.enemyCount+Math.floor(100*Math.random()),i=Object.keys(this.spawnTier[this.spawnTierGroup]).length,s=Math.floor(Math.random()*i);this.enemies[e]=this.spawnTier[this.spawnTierGroup][s](),this.spawnTierGroup=4===this.spawnTierGroup?1:this.spawnTierGroup+1}}},{key:"enemyRushInterval",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;"8"===this.screen&&(clearInterval(this.rushInterval),this.rushInterval=setInterval((function(){t.enemyRushSpawn(i)}),e))}},{key:"loadLevel",value:function(t){if(this.screen=t,this.renderMap=this.mapKeys[this.screen].renderMap,this.physicalMap=this.mapKeys[this.screen].physicalMap,this.enemies=this.mapKeys[this.screen].enemies(),this.mapKeys[this.screen].levelLayers&&(this.levelLayers=this.loadImages(this.mapKeys[this.screen].levelLayers)),this.mapKeys[this.screen].theme){var e=this.theme.music.muted;this.theme.pause(),this.theme=new l({src:this.mapKeys[this.screen].theme}),this.theme.play(),this.theme.music.muted=e}this.enemiesInterval()}},{key:"drawLevel",value:function(t){for(var e=0;e<this.cols;e++)for(var i=0;i<this.rows;i++){var s=this.getTile(e,i),h=s%8==0?8:s%8;s>0&&t.drawImage(this.tileMap,(h-1)*(this.tileMap.width/8),Math.floor(s/8)*(this.tileMap.width/8),64,64,e*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize)}}}])&&kt(e.prototype,i),s&&kt(e,s),t}();function Pt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fire=this.loadFire(),this.blueFire=this.loadBlueFire(),this.drawHealth=this.drawHealth.bind(this),this.drawDamageMeter=this.drawDamageMeter.bind(this),this.loadFire=this.loadFire.bind(this),this.loadBlueFire=this.loadBlueFire.bind(this),this.drawHUD=this.drawHUD.bind(this),this.drawAmmo=this.drawAmmo.bind(this),this.drawPoints=this.drawPoints.bind(this)}var e,i,s;return e=t,(i=[{key:"loadFire",value:function(){var t=new Image;return t.src="./assets/fireball.png",t}},{key:"loadBlueFire",value:function(){var t=new Image;return t.src="./assets/blue_fireball.png",t}},{key:"drawHUD",value:function(t,e,i,s,h){e.beginPath(),e.rect(0,t.height-55,t.width,55),e.fillStyle="black",e.fill(),e.closePath(),this.drawHealth(t,e,i),this.drawDamageMeter(t,e,i),this.drawPoints(e,t,h),this.drawAmmo(t,e,i,s)}},{key:"drawHealth",value:function(t,e,i){var s=t.width/2*(i.health/200);e.beginPath(),e.rect(150,t.height-40,t.width/2,20),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.closePath(),e.beginPath(),e.rect(150,t.height-40,s,20),e.fillStyle="red",e.fill(),e.closePath()}},{key:"drawDamageMeter",value:function(t,e,i){var s=t.width/2*(i.damageMeter/100);e.beginPath(),e.rect(150,t.height-15,t.width/2,7),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.closePath(),e.beginPath(),e.rect(150,t.height-15,s,7),e.fillStyle="rgb(0, 157, 255)",e.fill(),e.closePath()}},{key:"drawAmmo",value:function(t,e,i,s){if(i.damageBoost)e.drawImage(this.blueFire,s%8*43+21*(s%8+1),400,22,35,t.width-150,t.height-60,70,60);else{var h=t.width-50;switch(e.beginPath(),e.arc(h,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-100,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-150,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),Object.keys(i.fireballs).length){case 0:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-170,t.height-50,40,40);case 1:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-120,t.height-50,40,40);case 2:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-70,t.height-50,40,40)}}}},{key:"drawPoints",value:function(t,e,i){t.font="20px Arial",t.fillStyle="white",t.textAlign="left",t.fillText("Score: ".concat(i),20,e.height-25)}}])&&Pt(e.prototype,i),s&&Pt(e,s),t}();function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,h=!1,r=void 0;try{for(var n,a=t[Symbol.iterator]();!(s=(n=a.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){h=!0,r=t}finally{try{s||null==a.return||a.return()}finally{if(h)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Mt=function(){function t(e,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Tt(this,t),this.canvas=e,this.ctx=i,this.levelCall={1:St.level1(),2:St.level2()},this.player=new v(this.ctx,this.canvas),this.controller=new r(this.player),this.tileSize=e.width/15,this.level=new St({ctx:i,mapKeys:this.levelCall[s],player:this.player,tileSize:this.tileSize}),this.collider=new w(this.tileSize),this.HUD=new xt,this.frameCount=0,this.enemies=this.level.enemies,this.gameOver=!1,this.embers=new Image,this.embers.src="./assets/embers.jpg",this.highScore=0,this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this),this.playerPlatformCheck=this.playerPlatformCheck.bind(this),this.playerUpdate=this.playerUpdate.bind(this),this.projectilePlatformCheck=this.projectilePlatformCheck.bind(this),this.renderFireballs=this.renderFireballs.bind(this),this.renderEnemies=this.renderEnemies.bind(this),this.renderEnemyProjectiles=this.renderEnemyProjectiles.bind(this),this.startFrameCount=this.startFrameCount.bind(this),this.runGame=this.runGame.bind(this),this.isGameOver=this.isGameOver.bind(this),this.win=this.win.bind(this),this.enemiesCleared=this.enemiesCleared.bind(this),this.loadLevel=this.loadLevel.bind(this),this.resizeGame=this.resizeGame.bind(this),this.newLevel=this.newLevel.bind(this),this.enemyCount=Object.keys(this.enemies).length,this.cleared=!1,this.survivalMode=this.survivalMode.bind(this),this.startFrameCount()}var e,i,s;return e=t,(i=[{key:"startFrameCount",value:function(){var t=this;this.frameInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"newLevel",value:function(){this.level=new St({ctx:this.ctx,mapKeys:St.level2(),player:this.player,tileSize:this.tileSize}),this.renderMap=this.level.mapKeys[this.level.screen].renderMap,this.physicalMap=this.level.mapKeys[this.level.screen].physicalMap,this.enemies=this.level.enemies(),this.level.enemiesInterval()}},{key:"resizeGame",value:function(t){this.tileSize=t.width/15,this.level.tileSize=this.tileSize}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"enemiesCleared",value:function(){if(8!==parseInt(this.level.screen))return 0===Object.keys(this.enemies).length&&(this.cleared=!0,!0)}},{key:"playerPlatformCheck",value:function(){var t,e,i,s,h,r=0,n=0,a=this.level.physicalMap,o=jt(this.getTopLeftPos(),2);h=o[0],58===(t=a[15*(e=o[1])+h])&&n++,this.collider.collidePlatform(this.player,h*this.tileSize,e*this.tileSize,t,this.tileSize);var l=jt(this.getTopRightPos(),2);s=l[0],58===(t=a[15*(e=l[1])+s])&&n++,this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t,this.tileSize);var c=jt(this.getBottomLeftPos(),2);h=c[0],0===(t=a[15*(i=c[1])+h])&&r++,58===t&&n++,this.collider.collidePlatform(this.player,h*this.tileSize,i*this.tileSize,t,this.tileSize);var u=jt(this.getBottomRightPos(),2);s=u[0],0===(t=a[15*(i=u[1])+s])&&r++,58===t&&n++,this.player.canClimb&&0===n&&(this.player.canClimb=!1),2===r&&(this.player.onGround=!1),this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t,this.tileSize)}},{key:"projectilePlatformCheck",value:function(t){var e,i,s,h,r,n=this.level.physicalMap;if("left"===t.dir){var a=jt(t.getTopLeftPos(),2);r=a[0],e=n[15*(i=a[1])+r],this.collider.collidePlatform(t,r*this.tileSize,i*this.tileSize,e,this.tileSize);var o=jt(t.getBottomLeftPos(),2);r=o[0],e=n[15*(s=o[1])+r],this.collider.collidePlatform(t,r*this.tileSize,s*this.tileSize,e,this.tileSize)}if("right"===t.dir){var l=jt(t.getTopRightPos(),2);h=l[0],e=n[15*(i=l[1])+h],this.collider.collidePlatform(t,h*this.tileSize,i*this.tileSize,e,this.tileSize);var c=jt(t.getBottomRightPos(),2);h=c[0],e=n[15*(s=c[1])+h],this.collider.collidePlatform(t,h*this.tileSize,s*this.tileSize,e,this.tileSize)}}},{key:"playerUpdate",value:function(){this.player.setRunning(),this.player.isIdle(),this.player.setOldPos(),this.player.idle||(this.player.x+=this.player.velX),this.player.climbing?this.player.isClimbing():this.player.inAir(),this.collider.collidePlayer(this.player,this.canvas,this.cleared),this.playerPlatformCheck()}},{key:"renderEnemies",value:function(){if(this.enemyCount=Object.keys(this.level.enemies).length,!this.cleared){for(var t in this.enemies)this.projectilePlatformCheck(this.enemies[t]),this.enemies[t].dead?(this.player.damageMeter+=this.enemies[t].points/6,this.highScore+=this.enemies[t].points,delete this.enemies[t],this.enemyCount-=1):(this.enemies[t].drawEnemy(this.ctx,this.frameCount),this.collider.collideEnemy(this.player,this.enemies[t]),this.enemies[t].move(this.canvas,this.player,this.ctx));this.enemiesCleared()}}},{key:"renderFireballs",value:function(){if(0!==Object.keys(this.player.fireballs).length)for(var t in this.player.fireballs){var e=this.player.fireballs[t];if(0!==this.enemyCount)for(var i in this.enemies)this.collider.collideEnemy(e,this.enemies[i]);this.projectilePlatformCheck(e),e.isHit?delete this.player.fireballs[t]:e.drawProjectile(this.ctx,this.frameCount)}}},{key:"renderEnemyProjectiles",value:function(){var t=this;Object.values(this.enemies).forEach((function(e){if(0!==Object.keys(e.projectiles).length)for(var i in e.projectiles)t.collider.collideProjectile(t.player,e.projectiles[i]),t.projectilePlatformCheck(e.projectiles[i]),e.projectiles[i].isHit?delete e.projectiles[i]:e.projectiles[i].drawProjectile(t.ctx,t.frameCount)}))}},{key:"loadLevel",value:function(){this.player.x+this.player.width/2>=this.canvas.width?(this.level.loadLevel(parseInt(this.level.screen)+1),this.cleared=!1,this.enemies=this.level.enemies,this.enemyCount=Object.keys(this.enemies),this.player.x=0):this.player.x+this.player.width/2<=0&&(this.level.loadLevel(-1),this.player.x=this.canvas.width-this.player.width)}},{key:"survivalMode",value:function(){"8"===this.level.screen&&(0===this.level.rushLevel?(this.level.rushLevel++,this.level.enemyRushInterval(7e3,6)):this.highScore>30&&1===this.level.rushLevel?(this.level.rushLevel++,this.level.enemyRushInterval(6e3,7)):this.highScore>60&&2===this.level.rushLevel?(this.level.rushLevel++,this.level.enemyRushInterval(5e3,7)):this.highScore>100&&3===this.level.rushLevel?(this.level.rushLevel++,this.level.enemyRushInterval(4e3,8)):this.highScore>150&&4===this.level.rushLevel?(this.level.rushLevel++,this.level.enemyRushInterval(3e3,8)):this.highScore>250&&4===this.level.rushLevel&&(this.level.rushLevel++,this.level.enemyRushInterval(2e3,9)))}},{key:"isGameOver",value:function(){this.win(),this.gameOver=!(!this.player.dead&&!this.won)}},{key:"win",value:function(){this.won=6===this.level.screen&&0===Object.keys(this.enemies).length}},{key:"runGame",value:function(){this.isGameOver(),this.gameOver?this.won?(this.level.theme.pause(),this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("CONGRATS!",this.canvas.width/2,160),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("YOU BEAT LEVEL 1",this.canvas.width/2,this.canvas.height/2),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("YOUR SCORE IS ".concat(this.highScore),this.canvas.width/2,450),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,550)):(this.level.theme.pause(),this.highScore=Math.floor(this.highScore+this.player.health),this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="130px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,400)):(this.loadLevel(),this.level.renderBackground(this.ctx,this.canvas),this.level.screen>3&&this.level.drawLevel(this.ctx),this.player.drawSprite(this.frameCount),this.playerUpdate(),this.level.screen<5&&(this.level.renderMid(this.ctx,this.canvas),this.level.renderFront(this.ctx,this.canvas)),this.survivalMode(this.level,this.highScore),this.renderEnemies(),this.renderEnemyProjectiles(),this.renderFireballs(),this.HUD.drawHUD(this.canvas,this.ctx,this.player,this.frameCount,this.highScore))}}])&&It(e.prototype,i),s&&It(e,s),t}();function Yt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Ot=function(){function t(e,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.game=null,this.splash=new Image,this.splash.src="./assets/firegirl.jpg",this.renderGame=this.renderGame.bind(this),this.loadImage=this.loadImage.bind(this),this.newGame=this.newGame.bind(this),this.newEnemyRush=this.newEnemyRush.bind(this),window.addEventListener("keydown",(function(t){switch(t.preventDefault(),t.key){case"Enter":s.game&&!s.game.gameOver||s.newGame();break;case" ":s.game&&!s.game.gameOver||s.newEnemyRush();break;case"m":s.game.level.theme.mute();break;default:return}}))}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"newGame",value:function(){this.game&&!this.game.gameOver||(this.game=new Mt(this.canvas,this.ctx),this.game.HUD=new xt,this.game.level.theme.play())}},{key:"newEnemyRush",value:function(){this.game&&!this.game.gameOver||(this.game=new Mt(this.canvas,this.ctx,2),this.game.HUD=new xt,this.game.level.theme.play())}},{key:"renderGame",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.game||(this.ctx.drawImage(this.splash,0,0,920,644,0,0,this.canvas.width,this.canvas.height),this.ctx.font="100px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("FIRE GIRL",this.canvas.width/2,this.canvas.height/3),this.ctx.font="1.8em Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Level 1",this.canvas.width/2,this.canvas.height*(2/3)),this.ctx.font="1.8em Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Space to Play Survival Mode",this.canvas.width/2,this.canvas.height*(7/9))),this.game&&this.game.runGame(),window.requestAnimationFrame(this.renderGame)}}])&&Yt(e.prototype,i),s&&Yt(e,s),t}();window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("gameCanvas"),e=t.getContext("2d");new Ot(t,e).renderGame()}))}]);
//# sourceMappingURL=main.js.map