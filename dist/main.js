!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.keysPressed={},this.keydown=this.keydown.bind(this),this.keyup=this.keyup.bind(this),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}var e,i,r;return e=t,(i=[{key:"keydown",value:function(e){switch(this.player.idle=!1,this.player.keydown=!0,t.KEYS[e.keyCode]){case"left":this.keysPressed.left=!0,this.player.direction="left",this.player.velX=-7;break;case"right":this.keysPressed.right=!0,this.player.direction="right",this.player.velX=7;break;case"up":this.keysPressed.up=!0;break;case"down":this.keysPressed.down=!0;break;case"jump":this.keysPressed.jump=!0,this.player.jump();break;case"fire":this.keysPressed.fire=!0,this.keysPressed.up?this.player.shootFire("up"):this.keysPressed.down&&!this.player.onGround?this.player.shootFire("down"):this.player.shootFire();break;case"space":break;default:return}}},{key:"keyup",value:function(e){if("left"===t.KEYS[e.keyCode]||"right"===t.KEYS[e.keyCode])return this.player.keydown=!1,void(this.player.idle=!0);switch(t.KEYS[e.keyCode]){case"left":this.keysPressed.left=!1;break;case"right":this.keysPressed.right=!1;break;case"up":this.keysPressed.up=!1;break;case"down":this.keysPressed.down=!1;break;case"jump":this.keysPressed.jump=!1;break;case"fire":this.keysPressed.fire=!1;break;case"space":break;default:return}this.player.idle=!0}}])&&s(e.prototype,i),r&&s(e,r),t}();r.KEYS={19:"space",37:"left",38:"up",39:"right",40:"down",65:"jump",68:"fire",13:"enter"};var h=r;function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.pos=e.pos,this.ctx=e.ctx,this.canvas=e.canvas,this.width=e.width,this.height=e.height,this.x=e.pos[0],this.y=e.pos[1],this.oldX=this.x,this.oldY=this.y,this.tileSize=60,this.rightSide=this.rightSide.bind(this),this.leftSide=this.leftSide.bind(this),this.topSide=this.topSide.bind(this),this.bottomSide=this.bottomSide.bind(this),this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this)}var e,i,s;return e=t,(i=[{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}}])&&n(e.prototype,i),s&&n(e,s),t}();function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=c(this,f(e).call(this,{name:t.name,pos:t.pos,ctx:t.ctx,width:t.width,height:t.height}))).vel=[0,0],i.health=200,i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),i=e,(s=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/charSprite.png",t}}])&&l(i.prototype,s),r&&l(i,r),e}(a);function m(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var y=1,p=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.canvas=i,this.character=new d({name:"Seisa",pos:[20,100],ctx:this.ctx,canvas:this.canvas,width:40,height:54}),this.health=this.character.health,this.spriteMap=this.character.loadImage(),this.fireballs={},this.vel=this.character.vel,this.x=this.character.x,this.y=this.character.y,this.idleWidth=35,this.runWidth=40,this.oldX=this.x,this.oldY=this.y,this.width=this.character.width,this.height=this.character.height,this.velX=this.vel[0],this.velY=this.vel[1],this.onGround=!1,this.idle=!0,this.keydown=!1,this.isRunning=!1,this.direction="right",this.jumpCount=2,this.frameCount=0,this.isHit=!1,this.dying=!1,this.dead=!1,this.drawPlayer=this.drawPlayer.bind(this),this.jump=this.jump.bind(this),this.shootFire=this.shootFire.bind(this),this.setOldPos=this.setOldPos.bind(this),this.inAir=this.inAir.bind(this),this.isIdle=this.isIdle.bind(this),this.whichDirection=this.whichDirection.bind(this),this.setRunning=this.setRunning.bind(this),this.setHit=this.setHit.bind(this),this.setDying=this.setDying.bind(this)}var e,i,s;return e=t,(i=[{key:"drawPlayer",value:function(t){this.setDying(),this.isHit&&t%3==0||(0===this.velX?"right"===this.direction?this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%10*147,251,147,251,this.x,this.y,this.width,this.height):(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,Math.floor(t/2)%10*147,251,147,251,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)):this.velX>0?this.ctx.drawImage(this.spriteMap,t%10*186,0,186,251,this.x,this.y,this.width,this.height):this.velX<0&&(this.ctx.scale(-1,1),this.ctx.drawImage(this.spriteMap,t%10*186,0,186,251,-this.x-this.width,this.y,this.width,this.height),this.ctx.scale(-1,1)))}},{key:"shootFire",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(3!==Object.keys(this.fireballs).length){for(var e,i=1;i<=3;i++)if(!this.fireballs[i]){e=i;break}"up"===t?this.fireballs[e]=new j(j.fireballVert([this.rightSide()-this.width/2,this.bottomSide()+this.height],0,-20,t)):"down"===t?(this.fireballs[e]=new j(j.fireballVert([this.rightSide()-this.width/2,this.bottomSide()-this.height],0,20,t)),this.velY-=10,this.jumpCount-=1):"right"===this.direction?this.fireballs[e]=new j(j.fireball([this.rightSide()-this.width,this.bottomSide()-this.height/1.8],20,0,"right")):"left"===this.direction&&(this.fireballs[e]=new j(j.fireball([this.leftSide(),this.bottomSide()-this.height/1.8],-20,0,"left")))}}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),2e3),this.health-=e)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"rightSide",value:function(){return this.x+this.width}},{key:"leftSide",value:function(){return this.x}},{key:"topSide",value:function(){return this.y}},{key:"bottomSide",value:function(){return this.y+this.height}},{key:"setOldPos",value:function(){this.oldX=this.x,this.oldY=this.y}},{key:"getDirX",value:function(){return this.x+this.velX}},{key:"getDirY",value:function(){return this.y+this.velY}},{key:"isIdle",value:function(){0===this.velX&&0===this.velY?this.idle=!0:this.idle=!1}},{key:"inAir",value:function(){this.onGround?this.velY=0:(this.y+=this.velY,this.velY+=y)}},{key:"jump",value:function(){2===this.jumpCount?(this.onGround=!1,this.velY=-15,this.jumpCount=1):1===this.jumpCount&&(this.velY=-15,this.jumpCount=0)}},{key:"setRunning",value:function(){0!==this.velX?(this.isRunning=!0,this.width=this.runWidth):(this.isRunning=!1,this.width=this.idleWidth)}},{key:"whichDirection",value:function(){this.direction=this.velX>=0?"right":"left"}}])&&m(e.prototype,i),s&&m(e,s),t}();function g(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collidePlayer=this.collidePlayer.bind(this),this.collidePlatform=this.collidePlatform.bind(this),this.collidePlatTop=this.collidePlatTop.bind(this),this.collidePlatBottom=this.collidePlatBottom.bind(this),this.collidePlatLeft=this.collidePlatLeft.bind(this),this.collidePlatRight=this.collidePlatRight.bind(this),this.collideEnemy=this.collideEnemy.bind(this)}var e,i,s;return e=t,(i=[{key:"collidePlayer",value:function(t,e,i){t.x<0?(t.x=.01,t.velX=0):t.x+t.width>e.width&&!i&&(t.x=e.width-t.width,t.velX=0),t.y>e.height&&(t.y=0,t.setHit(50))}},{key:"collideProjectile",value:function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(e.damage),e.setHit(),!0)}},{key:"collideEnemy",value:function(t,e){return!e.dying&&!e.dead&&t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&(t instanceof p&&!t.isHit?(t.velY=-t.velY/3,t.velX=-t.velX/3,t.setHit(this.damage),!0):t instanceof j?(e.setHit(t.damage),setTimeout((function(){t.setHit()}),10),!0):void 0)}},{key:"collidePlatTop",value:function(t,e){return t.bottomSide()>e&&t.oldY+t.height<e?t instanceof j?(t.setHit(),!0):(t.velY=0,t.y=e-t.height-.01,t instanceof p&&(t.onGround=!0,t.jumpCount=2),!0):(t instanceof p&&(t.onGround=!1),!1)}},{key:"collidePlatBottom",value:function(t,e){return t.topSide()<e&&t.oldY+t.height>e&&(t instanceof j&&t.setHit(),t.y=e+.05,t.velY=0,!0)}},{key:"collidePlatRight",value:function(t,e){return t.leftSide()<e&&t.oldX+t.width>e&&(t instanceof j&&t.setHit(),t.x=e+.05,!0)}},{key:"collidePlatLeft",value:function(t,e){return t.rightSide()>e&&t.oldX<e&&(t instanceof j&&t.setHit(),t.x=e-t.width-.05,!0)}},{key:"collidePlatform",value:function(t,e,i,s){if(s)switch(s){case 1:this.collidePlatTop(t,i);break;case 2:t.velY>0&&this.collidePlatTop(t,i);break;case 3:if(this.collidePlatTop(t,i))return;if(this.collidePlatLeft(t,e))return;this.collidePlatRight(t,e+60);break;case 4:if(this.collidePlatTop(t,i))return;if(this.collidePlatRight(t,e+60))return;this.collidePlatLeft(t,e);break;case 5:if(this.collidePlatTop(t,i))return;if(this.collidePlatBottom(t,i+60))return;this.collidePlatRight(t,e+60);break;case 6:if(this.collidePlatTop(t,i))return;this.collidePlatBottom(t,i+60);break;case 7:this.collidePlatBottom(t,i+10),t instanceof p&&t.setHit(5);break;case 8:if(this.collidePlatTop(t,i))return;this.collidePlatRight(t,e+60);break;case 9:this.collidePlatLeft(t,e);break;case 10:this.collidePlatRight(t,e+60);break;case 11:if(this.collidePlatLeft(t,e))return void(t instanceof p&&t.setHit(5));if(this.collidePlatBottom(t,i+10))return void(t instanceof p&&t.setHit(5));this.collidePlatRight(t,e+60),t instanceof p&&t.setHit(5)}}}])&&g(e.prototype,i),s&&g(e,s),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,r=!1,h=void 0;try{for(var n,a=t[Symbol.iterator]();!(s=(n=a.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){r=!0,h=t}finally{try{s||null==a.return||a.return()}finally{if(r)throw h}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=S(e).call(this,t))||"object"!==b(r)&&"function"!=typeof r?P(s):r).proj=i.loadImage(t.image),i.velX=t.velX,i.velY=t.velY,i.oldX=i.x,i.oldY=i.y,i.dir=t.dir||"right",i.damage=t.damage,i.frameStartX=t.frameStartX,i.frameStartY=t.frameStartY,i.frameWidth=t.frameWidth,i.frameHeight=t.frameHeight,i.frameNum=t.frameNum,i.tileSize=60,i.collider=new v,i.isHit=!1,i.loadImage=i.loadImage.bind(P(i)),i.getTopLeftPos=i.getTopLeftPos.bind(P(i)),i.getTopRightPos=i.getTopRightPos.bind(P(i)),i.getBottomLeftPos=i.getBottomLeftPos.bind(P(i)),i.getBottomRightPos=i.getBottomRightPos.bind(P(i)),i.setHit=i.setHit.bind(P(i)),i.timeOutHit=i.timeOutHit.bind(P(i)),i.updateProjectile=i.updateProjectile.bind(P(i)),i.drawProjectile=i.drawProjectile.bind(P(i)),i.timeOutHit(),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,t),i=e,r=[{key:"fireball",value:function(t,e,i,s){return{pos:t,width:55,height:16,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:277,frameWidth:65,frameHeight:16,frameNum:8,image:"./assets/fireball.png",damage:25}}},{key:"fireballVert",value:function(t,e,i,s){return{pos:t,width:16,height:55,velX:e,velY:i,dir:s,frameStartX:10,frameStartY:400,frameWidth:22,frameHeight:35,frameNum:8,image:"./assets/fireball.png",damage:25}}},{key:"helibullet",value:function(t,e,i,s){return{pos:t,width:25,height:25,velX:e,velY:i,dir:s,frameStartX:420,frameStartY:330,frameWidth:15,frameHeight:15,frameNum:1,image:"./assets/footEn.png",damage:10}}}],(s=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.leftSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.rightSide()/this.tileSize),Math.floor(this.bottomSide()/this.tileSize)]}},{key:"setHit",value:function(){this.isHit=!this.isHit}},{key:"timeOutHit",value:function(){var t=this;this.hitTimeout=setTimeout((function(){t.setHit()}),2e3)}},{key:"platformCheck",value:function(){var t,e,i,s,r;if("left"===this.dir){var h=w(this.getTopLeftPos(),2);r=h[0],e=h[1],t=this.physicalMap[15*e+r],this.collider.collidePlatform(this,r*this.tileSize,e*this.tileSize,t);var n=w(this.getBottomLeftPos(),2);r=n[0],i=n[1],t=this.physicalMap[15*i+r],this.collider.collidePlatform(this,r*this.tileSize,i*this.tileSize,t)}if("right"===this.dir){var a=w(this.getTopRightPos(),2);s=a[0],e=a[1],t=this.physicalMap[15*e+s],this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t);var o=w(this.getBottomRightPos(),2);s=o[0],i=o[1],t=this.physicalMap[15*i+s],this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t)}}},{key:"updateProjectile",value:function(){this.oldX=this.x,this.oldY=this.y,this.x+=this.velX,this.y+=this.velY}},{key:"drawProjectile",value:function(t,e){this.hit||(this.updateProjectile(),"up"===this.dir?(t.scale(1,-1),t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,-this.y+this.height,this.width,this.height),t.scale(1,-1)):"down"===this.dir?t.drawImage(this.proj,e%this.frameNum*43+21*(e%this.frameNum+1),this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):"right"===this.dir?t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.proj,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.frameWidth,this.y,this.width,this.height),t.scale(-1,1)))}}])&&k(i.prototype,s),r&&k(i,r),e}(a);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=T(e).call(this,t))||"object"!==O(r)&&"function"!=typeof r?I(s):r).velX=t.velX?t.velX:0,i.velY=t.velY?t.velY:0,i.enemy=i.loadImage(t.image),i.frameNum=t.frameNum,i.dir=t.dir||"right",i.frameStartX=68,i.frameStartY=290,i.frameWidth=116,i.frameHeight=80,i.projectiles={},i.dying=!1,i.dead=!1,i.health=t.health,i.damage=t.damage,i.isHit=!1,i.setHit=i.setHit.bind(I(i)),i.setDying=i.setDying.bind(I(i)),i.loadImage=i.loadImage.bind(I(i)),i.drawEnemy=i.drawEnemy.bind(I(i)),i.shootProj=i.shootProj.bind(I(i)),i.callAttack=i.callAttack.bind(I(i)),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,t),i=e,r=[{key:"helicopter",value:function(t){return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,velX:3,dir:"right",health:100,damage:10}}}],(s=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"setHit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;console.log(this.health),this.isHit||(this.isHit=!0,this.hitCooldown=setTimeout((function(){t.isHit=!1}),500),this.health-=e)}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,setTimeout((function(){t.dead=!0}),1e3))}},{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new j(j.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new j(j.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),200)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}},{key:"hitBox",value:function(t,e){if(t.y<e.y+e.height&&t.y>e.y+e.height/2){if("right"===e.dir&&t.x<e.x+e.width&&t.x+t.width>e.x+e.width/3||"left"===e.dir&&t.x<e.x+e.width*(2/3)&&t.x+t.width>e.x)return!0}else if((t.y<e.height/2&&t.y>e.y||t.y+t.height>e.y)&&t.x<e.x+e.width&&t.x+t.width>e.x)return!0;return!1}}])&&X(i.prototype,s),r&&X(i,r),e}(a);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=Y(e).call(this,t))||"object"!==H(r)&&"function"!=typeof r?z(s):r).velX=t.velX||3,i.velY=0,i.image=t.image||"./assets/footEn.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||3,i.frameStartX=t.frameStartX||68,i.frameStartY=t.frameStartY||290,i.frameWidth=t.frameWidth||116,i.frameHeight=t.frameHeight||80,i.projectiles={},i.loadImage=i.loadImage.bind(z(i)),i.drawEnemy=i.drawEnemy.bind(z(i)),i.shootProj=i.shootProj.bind(z(i)),i.callAttack=i.callAttack.bind(z(i)),i.callAttack(),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),i=e,r=[{key:"hel1",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right",i=arguments.length>2?arguments[2]:void 0;return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:200,height:125,health:100,velX:"left"===e?-3:3,velY:i||0,dir:e}}},{key:"hel2",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";return{name:"helicopter",image:"./assets/footEn.png",frameNum:3,pos:t,width:150,height:85,health:100,velX:"left"===e?-3:3,dir:e}}}],(s=[{key:"drawEnemy",value:function(t,e){this.setDying(),(this.isHit||this.dying)&&e%3==0||("left"===this.dir?t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new j(j.helibullet([this.leftSide()+.15*this.width,this.bottomSide()-.184*this.height],-9,7,"left")):this.projectiles[t]=new j(j.helibullet([this.rightSide()-.2*this.width,this.bottomSide()-.184*this.height],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"callAttack",value:function(){var t=this;this.attackInterval=setInterval((function(){t.shootProj()}),500)}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}}])&&M(i.prototype,s),r&&M(i,r),e}(C);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=W(e).call(this,t))||"object"!==R(r)&&"function"!=typeof r?N(s):r).velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/footEn.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||4,i.frameStartX=10,i.frameStartY=265,i.frameWidth=t.frameWidth||117,i.frameHeight=t.frameHeight||107,i.active=!0,i.opening=!1,i.projectiles={},i.drawEnemy=i.drawEnemy.bind(N(i)),i.shootProj=i.shootProj.bind(N(i)),i.callAttack=i.callAttack.bind(N(i)),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(e,t),i=e,r=[{key:"flow1",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";return{name:"helicopter",image:"./assets/plant.png",frameNum:3,pos:t,width:54,height:54,health:50,velX:0,dir:e}}},{key:"flow2",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";return{name:"helicopter",image:"./assets/plant.png",frameNum:3,pos:t,width:84,height:84,health:50,velX:0,dir:e}}},{key:"flow3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";return{name:"helicopter",image:"./assets/plant.png",frameNum:3,pos:t,width:110,height:110,health:100,velX:0,dir:e}}}],(s=[{key:"isActive",value:function(){}},{key:"drawEnemy",value:function(t,e){if(this.setDying(),!this.isHit&&!this.dying||e%3!=0)if(this.active){var i=Math.floor(e/2.5)%this.frameNum,s=i>0?20:this.frameStartX;t.drawImage(this.enemy,i%this.frameNum*this.frameWidth+s,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)}else t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new j(j.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new j(j.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t){this.oldX=this.x,this.x+=this.velX,(this.x+this.width/2<0||this.x+this.width/2>t.width)&&(this.velX*=-1,this.dir="right"===this.dir?"left":"right")}}])&&A(i.prototype,s),r&&A(i,r),e}(C);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=K(e).call(this,t))||"object"!==D(r)&&"function"!=typeof r?U(s):r).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=20,i.drawEnemy=i.drawEnemy.bind(U(i)),i.shootProj=i.shootProj.bind(U(i)),i.checkPlayerPos=i.checkPlayerPos.bind(U(i)),i.callAttack=i.callAttack.bind(U(i)),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,t),i=e,r=[{key:"vine1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:65,height:95,health:75,velX:1,dir:i,player:e}}},{key:"vine2",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:100,height:145,health:120,velX:1,dir:i,player:e}}},{key:"vine3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:35,height:45,health:50,velX:1,dir:i,player:e}}}],(s=[{key:"checkPlayerPos",value:function(t,e,i){var s=this;e>this.y?this.velY=1:this.velY=-1,e>this.y&&e<this.y+this.height&&(t>this.x||t<this.x)?this.velX="left"===this.dir?-4:4:this.velX="left"===this.dir?-1:1,t>this.x&&"left"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=1,s.dir="right"}),1e3):t<this.x&&"right"===this.dir?this.playerCheckTimeout=setTimeout((function(){s.velX=-1,s.dir="left"}),1e3):(t>this.x&&"right"===this.dir||t<this.x&&"left"===this.dir)&&clearTimeout(this.playerCheckTimeout)}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2)}},{key:"drawEnemy",value:function(t,e){this.setDying(),(!this.isHit&&!this.dying||e%3!=0)&&("right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(e/1.5)%this.frameNum*this.frameWidth,this.frameStartY,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,e%this.frameNum*this.frameWidth+this.frameStartX,this.frameStartY,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1)))}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new j(j.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new j(j.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"move",value:function(t,e,i){this.oldY=this.y,this.oldX=this.x,this.x+=this.velX,this.y+=this.velY,this.checkPlayerPos(e,i)}}])&&F(i.prototype,s),r&&F(i,r),e}(C);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var et=function(t){function e(t){var i,s,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(i=!(r=Z(e).call(this,t))||"object"!==J(r)&&"function"!=typeof r?$(s):r).player=t.player,i.velX=t.velX||0,i.velY=0,i.image=t.image||"./assets/vinehead.png",i.enemy=i.loadImage(i.image),i.frameNum=t.frameNum||8,i.frameStartX=0,i.frameStartY=0,i.frameWidth=t.frameWidth||57,i.frameHeight=t.frameHeight||87,i.active=!0,i.opening=!1,i.projectiles={},i.playerCheckTimeout="",i.damage=50,i.attacking=!1,i.charging=!1,i.frameCount=0,i.drawEnemy=i.drawEnemy.bind($(i)),i.shootProj=i.shootProj.bind($(i)),i.checkPlayerPos=i.checkPlayerPos.bind($(i)),i.callAttack=i.callAttack.bind($(i)),i.charge=i.charge.bind($(i)),i.startFrameCount=i.startFrameCount.bind($(i)),i.startFrameCount(),i}var i,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,t),i=e,r=[{key:"boss1",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],{name:"vinehead",image:"./assets/vinehead.png",frameNum:8,pos:t,width:260,height:370,health:1200,velX:0,dir:"left",player:e}}}],(s=[{key:"startFrameCount",value:function(){var t=this;this.bossInterval=setInterval((function(){t.frameCount++}),1e3/30),this.attackTimeout=setTimeout((function(){t.attack()}),1e3)}},{key:"spawnEnemies",value:function(){}},{key:"attack",value:function(){var t=this;this.attacking=!0,this.chargeTimeout=setTimeout((function(){t.charge()}),4e3)}},{key:"charge",value:function(){this.charging=!0,this.velX=-5}},{key:"checkPlayerPos",value:function(t,e,i){}},{key:"setPlayerCheckInterval",value:function(t){var e=this;this.playerCheckInterval=setInterval((function(){e.checkPlayerPos(t)}),2)}},{key:"drawEnemy",value:function(t,e){if(this.setDying(),!this.isHit&&!this.dying||e%3!=0){var i=this.attacking&&(this.frameCount%3==0||this.frameCount%3==1)||this.charging?87:this.frameStartY;"right"===this.dir?(Math.floor(e/2.5),this.frameNum,t.drawImage(this.enemy,Math.floor(this.frameCount/1.5)%this.frameNum*this.frameWidth,i,this.frameWidth,this.frameHeight,this.x,this.y,this.width,this.height)):(t.scale(-1,1),t.drawImage(this.enemy,this.frameCount%this.frameNum*this.frameWidth+this.frameStartX,i,this.frameWidth,this.frameHeight,-this.x-this.width,this.y,this.width,this.height),t.scale(-1,1))}}},{key:"shootProj",value:function(){if(3!==Object.keys(this.projectiles).length){for(var t,e=1;e<=3;e++)if(!this.projectiles[e]){t=e;break}"left"===this.dir?this.projectiles[t]=new j(j.helibullet([this.leftSide()+30,this.bottomSide()-23],-9,7,"left")):this.projectiles[t]=new j(j.helibullet([this.rightSide()-40,this.bottomSide()-23],9,7,"right"))}}},{key:"setDying",value:function(){var t=this;this.health<=0&&(this.dying=!0,this.damage=0,this.velX=0,this.velY=0,clearInterval(this.attackInterval),setTimeout((function(){t.dead=!0}),300))}},{key:"backUp",value:function(){this.charging=!1,this.velX=1}},{key:"move",value:function(t,e,i){var s=this;this.oldX=this.x,this.x+=this.velX,this.x<160?(this.x=160,this.backUp()):this.x>650&&(this.velX=0,this.attacking=!1,this.x=650,this.attackTimeout=setTimeout((function(){s.attack()}),1e4))}}])&&Q(i.prototype,s),r&&Q(i,r),e}(C);function it(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var st=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e.ctx,this.player=e.player,this.mapKeys=e.mapKeys,this.screen=1,this.renderMap=e.renderMap||this.mapKeys[this.screen].renderMap,this.physicalMap=e.physicalMap||this.mapKeys[this.screen].physicalMap,this.cols=15,this.rows=10,this.tileSize=60,this.tileMap=this.loadImage(),this.mapTileSize=this.tileMap.width/this.rows,this.enemies=this.mapKeys[this.screen].enemies,this.enemyCount=1,this.getTile=this.getTile.bind(this),this.getLeft=this.getLeft.bind(this),this.getRight=this.getRight.bind(this),this.getTop=this.getTop.bind(this),this.getBottom=this.getBottom.bind(this),this.drawLevel=this.drawLevel.bind(this),this.loadImage=this.loadImage.bind(this),this.loadLevel=this.loadLevel.bind(this),this.enemiesInterval=this.enemiesInterval.bind(this),this.spawnEnemies=this.spawnEnemies.bind(this),this.enemiesInterval()}var e,i,s;return e=t,s=[{key:"level1",value:function(){return{1:{renderMap:[9,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,39,0,0,0,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,22,23,23,63,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,29,29,29,29,9,0,0,0,0,0,0,0,0,0,0,3,27,27,27,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:{1:new L(L.hel1([100,100])),2:new L(L.hel1([570,50],"left")),3:new G(G.flow1([600,500])),4:new G(G.flow1([400,320])),5:new G(G.flow1([240,500]))}},2:{renderMap:[0,0,0,0,38,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,39,0,0,42,41,39,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,17,0,0,0,0,0,0,0,0,17,0,16,0,17,0,16,0,3,1,1,1,0,0,0,16,0,0,0,16,0,0,0,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6,1,1,1,1,0,0,0,0,0,0,0,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6],physicalMap:[0,0,0,0,38,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,39,0,0,42,41,39,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,6,0,0,0,0,0,0,0,0,6,0,7,0,6,0,7,0,3,1,1,1,0,0,0,7,0,0,0,7,0,0,0,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6,1,1,1,8,0,0,0,0,0,0,0,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,6,6,6,6],enemies:{1:new L(L.hel1([100,25])),3:new G(G.flow2([290,190])),5:new q(q.vine1([500,100],this.player)),4:new G(G.flow2([530,190]))}},3:{renderMap:[0,0,38,39,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,38,39,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3,1,1,1,2,0,0,0,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,4,28,1,1,1,0,0,0,0,0,0,0,0,3,1,1,1,9,0,0,0,0,0,0,0,0,0,0,16,16,16,16,0,0,38,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,0,1,1,1,1],physicalMap:[0,0,38,39,0,0,0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,38,39,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,3,1,1,1,8,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,3,1,1,1,9,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,0,0,0,0,0,0,0,0,0,0,9,0,0,0,10,0,1,1,1,1],enemies:{1:new L(L.hel2([500,0])),4:new q(q.vine3([500,100],this.player)),5:new q(q.vine3([300,450],this.player)),6:new q(q.vine3([850,500],this.player)),7:new q(q.vine1([800,-20],this.player))}},4:{renderMap:[0,42,41,39,0,0,0,0,0,0,0,0,0,0,0,39,29,29,29,29,29,29,0,29,29,29,29,29,29,29,1,2,2,2,2,2,2,0,3,2,2,2,2,2,1,5,9,0,0,0,0,0,0,0,0,0,0,13,5,5,28,0,0,0,0,0,0,0,0,0,0,0,0,4,28,1,1,2,0,0,42,41,39,0,0,0,3,1,1,1,16,16,16,0,0,0,0,0,0,0,0,5,5,5,5,0,0,38,39,0,29,29,29,29,29,3,1,1,1,1,0,0,0,0,0,3,1,1,1,2,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,1,1,1,1,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,3,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:{1:new q(q.vine3([10,530],this.player)),2:new q(q.vine3([830,0],this.player)),3:new q(q.vine2([600,600],this.player)),4:new q(q.vine1([500,100],this.player)),5:new q(q.vine2([200,450],this.player)),6:new q(q.vine2([850,500],this.player)),7:new q(q.vine1([800,-20],this.player))}},5:{renderMap:[0,42,41,39,0,0,0,13,5,5,5,49,5,5,5,39,0,0,0,0,0,0,0,16,16,16,16,16,16,16,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,23,0,0,42,41,39,0,0,0,0,0,0,0,28,9,0,0,0,0,0,0,0,0,0,0,0,0,0,5,29,29,29,0,29,29,0,47,47,47,47,47,47,47,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],physicalMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],enemies:{1:new et(et.boss1([650,120],this.player))}}}}}],(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"getTile",value:function(t,e){return this.renderMap[e*this.cols+t]}},{key:"getLeft",value:function(t,e){return Math.floor(t*this.tileSize)}},{key:"getRight",value:function(t,e){return Math.floor(t*this.tileSize+this.tileSize)}},{key:"getTop",value:function(t,e){return Math.floor(e*this.tileSize-this.tileSize)}},{key:"getBottom",value:function(t,e){return Math.floor(e*this.tileSize)}},{key:"enemiesInterval",value:function(){var t=this;this.screen<5||(this.spawnInterval=setInterval((function(){t.spawnEnemies()}),9e3))}},{key:"spawnEnemies",value:function(){if(console.log(this.enemies[1].health),console.log(this.enemies),console.log(this.enemyCount),!(Object.keys(this.enemies).length>=8)){this.enemyCount++;var t=this.enemyCount,e=600*Math.random();this.enemies[t]=new q(q.vine3([890,e],this.player,"left"))}}},{key:"loadLevel",value:function(t){this.screen+=t,this.renderMap=this.mapKeys[this.screen].renderMap,this.physicalMap=this.mapKeys[this.screen].physicalMap,this.enemies=this.mapKeys[this.screen].enemies,this.enemiesInterval()}},{key:"drawLevel",value:function(t){for(var e=0;e<this.cols;e++)for(var i=0;i<this.rows;i++){var s=this.getTile(e,i),r=s%8==0?8:s%8;s>0&&t.drawImage(this.tileMap,(r-1)*(this.tileMap.width/8),Math.floor(s/8)*(this.tileMap.width/8),this.tileSize,this.tileSize,e*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize)}}}])&&it(e.prototype,i),s&&it(e,s),t}();function rt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ht=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fire=this.loadImage(),this.drawHealth=this.drawHealth.bind(this),this.loadImage=this.loadImage.bind(this),this.drawHUD=this.drawHUD.bind(this),this.drawAmmo=this.drawAmmo.bind(this)}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/fireball.png",t}},{key:"drawHUD",value:function(t,e,i,s){e.beginPath(),e.rect(0,t.height-55,t.width,55),e.fillStyle="black",e.fill(),e.closePath(),this.drawHealth(t,e,i),this.drawAmmo(t,e,i,s)}},{key:"drawHealth",value:function(t,e,i){var s=t.width/2*(i.health/200);e.beginPath(),e.rect(20,t.height-40,t.width/2,25),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.closePath(),e.beginPath(),e.rect(20,t.height-40,s,25),e.fillStyle="red",e.fill(),e.closePath()}},{key:"drawAmmo",value:function(t,e,i,s){var r=t.width-50;switch(e.beginPath(),e.arc(r,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-100,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),e.beginPath(),e.arc(t.width-150,t.height-24,5,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, .1)",e.fill(),e.lineWidth=5,e.strokeStyle="rgba(255, 255, 255, .1)",e.stroke(),e.closePath(),Object.keys(i.fireballs).length){case 0:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-170,t.height-50,40,40);case 1:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-120,t.height-50,40,40);case 2:e.drawImage(this.fire,s%8*43+21*(s%8+1),400,22,35,t.width-70,t.height-50,40,40)}}}])&&rt(e.prototype,i),s&&rt(e,s),t}();function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,r=!1,h=void 0;try{for(var n,a=t[Symbol.iterator]();!(s=(n=a.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){r=!0,h=t}finally{try{s||null==a.return||a.return()}finally{if(r)throw h}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function at(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ot=2.5,lt=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.player=new p(this.ctx,this.canvas),this.controller=new h(this.player),this.level=new st({ctx:i,mapKeys:st.level1(),player:this.player}),this.tileSize=this.level.tileSize,this.collider=new v,this.HUD=new ht,this.frameCount=0,this.enemies=this.level.enemies,this.gameOver=!1,this.embers=new Image,this.embers.src="./assets/embers.jpg",this.getTopLeftPos=this.getTopLeftPos.bind(this),this.getTopRightPos=this.getTopRightPos.bind(this),this.getBottomLeftPos=this.getBottomLeftPos.bind(this),this.getBottomRightPos=this.getBottomRightPos.bind(this),this.playerPlatformCheck=this.playerPlatformCheck.bind(this),this.playerUpdate=this.playerUpdate.bind(this),this.projectilePlatformCheck=this.projectilePlatformCheck.bind(this),this.renderFireballs=this.renderFireballs.bind(this),this.renderEnemies=this.renderEnemies.bind(this),this.renderEnemyProjectiles=this.renderEnemyProjectiles.bind(this),this.startFrameCount=this.startFrameCount.bind(this),this.runGame=this.runGame.bind(this),this.isGameOver=this.isGameOver.bind(this),this.win=this.win.bind(this),this.enemiesCleared=this.enemiesCleared.bind(this),this.loadLevel=this.loadLevel.bind(this),this.enemyCount=Object.keys(this.enemies).length,this.cleared=!1,this.startFrameCount()}var e,i,s;return e=t,(i=[{key:"startFrameCount",value:function(){var t=this;this.frameInterval=setInterval((function(){t.frameCount++}),1e3/30)}},{key:"getTopLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getTopRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.topSide()/this.tileSize)]}},{key:"getBottomLeftPos",value:function(){return[Math.floor(this.player.leftSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"getBottomRightPos",value:function(){return[Math.floor(this.player.rightSide()/this.tileSize),Math.floor(this.player.bottomSide()/this.tileSize)]}},{key:"enemiesCleared",value:function(){return 0===Object.keys(this.enemies).length&&(this.cleared=!0,!0)}},{key:"playerPlatformCheck",value:function(){var t,e,i,s,r,h=0,n=this.level.physicalMap,a=nt(this.getTopLeftPos(),2);r=a[0],t=n[15*(e=a[1])+r],this.collider.collidePlatform(this.player,r*this.tileSize,e*this.tileSize,t);var o=nt(this.getTopRightPos(),2);s=o[0],t=n[15*(e=o[1])+s],this.collider.collidePlatform(this.player,s*this.tileSize,e*this.tileSize,t);var l=nt(this.getBottomLeftPos(),2);r=l[0],0===(t=n[15*(i=l[1])+r])&&h++,this.collider.collidePlatform(this.player,r*this.tileSize,i*this.tileSize,t);var c=nt(this.getBottomRightPos(),2);s=c[0],0===(t=n[15*(i=c[1])+s])&&h++,2===h&&(this.player.onGround=!1),this.collider.collidePlatform(this.player,s*this.tileSize,i*this.tileSize,t)}},{key:"projectilePlatformCheck",value:function(t){var e,i,s,r,h,n=this.level.physicalMap;if("left"===t.dir){var a=nt(t.getTopLeftPos(),2);h=a[0],e=n[15*(i=a[1])+h],this.collider.collidePlatform(t,h*this.tileSize,i*this.tileSize,e);var o=nt(t.getBottomLeftPos(),2);h=o[0],e=n[15*(s=o[1])+h],this.collider.collidePlatform(t,h*this.tileSize,s*this.tileSize,e)}if("right"===t.dir){var l=nt(t.getTopRightPos(),2);r=l[0],e=n[15*(i=l[1])+r],this.collider.collidePlatform(t,r*this.tileSize,i*this.tileSize,e);var c=nt(t.getBottomRightPos(),2);r=c[0],e=n[15*(s=c[1])+r],this.collider.collidePlatform(t,r*this.tileSize,s*this.tileSize,e)}}},{key:"playerUpdate",value:function(){this.player.setRunning(),this.player.isIdle(),this.player.setOldPos(),this.player.idle||("right"===this.player.direction?this.player.onGround&&!this.player.keydown&&(this.player.velX<1?this.player.velX=0:this.player.velX/=ot):"left"===this.player.direction&&this.player.onGround&&!this.player.keydown&&(this.player.velX>-1?this.player.velX=0:this.player.velX/=ot),this.player.x+=this.player.velX),this.player.inAir(),this.collider.collidePlayer(this.player,this.canvas,this.cleared),this.playerPlatformCheck()}},{key:"renderEnemies",value:function(){if(5===this.level.screen&&(this.enemyCount=Object.keys(this.level.enemies).length),!this.cleared){for(var t in this.enemies)this.enemies[t].dying&&!this.enemies[t].dead||(this.projectilePlatformCheck(this.enemies[t]),this.enemies[t].dead?(delete this.enemies[t],this.enemyCount-=1):(this.enemies[t].move(this.canvas,this.player.x,this.player.y),this.collider.collideEnemy(this.player,this.enemies[t]),this.enemies[t].drawEnemy(this.ctx,this.frameCount)));this.enemiesCleared()}}},{key:"renderFireballs",value:function(){if(0!==Object.keys(this.player.fireballs).length)for(var t in this.player.fireballs){var e=this.player.fireballs[t];if(0!==this.enemyCount)for(var i in this.enemies)this.collider.collideEnemy(e,this.enemies[i]);this.projectilePlatformCheck(e),e.isHit?delete this.player.fireballs[t]:e.drawProjectile(this.ctx,this.frameCount)}}},{key:"renderEnemyProjectiles",value:function(){var t=this;Object.values(this.enemies).forEach((function(e){if(0!==Object.keys(e.projectiles).length)for(var i in e.projectiles)t.collider.collideProjectile(t.player,e.projectiles[i]),t.projectilePlatformCheck(e.projectiles[i]),e.projectiles[i].isHit?delete e.projectiles[i]:e.projectiles[i].drawProjectile(t.ctx,t.frameCount)}))}},{key:"loadLevel",value:function(){this.player.x+this.player.width/2>=this.canvas.width?(this.level.loadLevel(1),this.cleared=!1,this.enemies=this.level.enemies,this.enemyCount=Object.keys(this.enemies),this.player.x=0):this.player.x+this.player.width/2<=0&&(this.level.loadLevel(-1),this.player.x=this.canvas.width-this.player.width)}},{key:"isGameOver",value:function(){this.win(),this.gameOver=!(!this.player.dead&&!this.won)}},{key:"win",value:function(){this.won=5===this.level.screen&&0===Object.keys(this.enemies).length}},{key:"runGame",value:function(){this.isGameOver(),this.gameOver?this.won?(this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("CONGRATS!",this.canvas.width/2,160),this.ctx.font="80px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("YOU BEAT LEVEL 1",this.canvas.width/2,this.canvas.height/2),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,400)):(this.ctx.drawImage(this.embers,0,0,852,400,0,0,900,600),this.ctx.font="130px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2),this.ctx.font="50px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play Again",this.canvas.width/2,400)):(this.loadLevel(),this.level.drawLevel(this.ctx),this.player.drawPlayer(this.frameCount),this.playerUpdate(),this.renderEnemies(),this.renderEnemyProjectiles(),this.renderFireballs(),this.HUD.drawHUD(this.canvas,this.ctx,this.player,this.frameCount))}}])&&at(e.prototype,i),s&&at(e,s),t}();function ct(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var ft=function(){function t(e,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.game=null,this.splash=new Image,this.splash.src="./assets/firegirl.jpg",this.renderGame=this.renderGame.bind(this),this.loadImage=this.loadImage.bind(this),this.newGame=this.newGame.bind(this),window.addEventListener("keydown",(function(t){(!s.game||s.game.gameOver&&13===t.keyCode)&&s.newGame()}))}var e,i,s;return e=t,(i=[{key:"loadImage",value:function(){var t=new Image;return t.src="./assets/tileGen.png",t}},{key:"newGame",value:function(){this.game&&!this.game.gameOver||(this.game=new lt(this.canvas,this.ctx))}},{key:"renderGame",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.game||(this.ctx.drawImage(this.splash,0,0,920,644,0,0,900,600),this.ctx.font="150px Arial",this.ctx.fillStyle="rgb(46, 2, 2)",this.ctx.textAlign="center",this.ctx.fillText("FIRE GIRL",this.canvas.width/2,230),this.ctx.font="60px Arial",this.ctx.fillStyle="pink",this.ctx.textAlign="center",this.ctx.fillText("Press Enter to Play",this.canvas.width/2,350)),this.game&&this.game.runGame(),window.requestAnimationFrame(this.renderGame)}}])&&ct(e.prototype,i),s&&ct(e,s),t}();window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("gameCanvas"),e=t.getContext("2d");new ft(t,e).renderGame()}))}]);
//# sourceMappingURL=main.js.map